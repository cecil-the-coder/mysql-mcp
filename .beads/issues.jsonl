{"id":"mysql-mcp-023","title":"Fix DECIMAL precision loss in column serialization","description":"read.rs:196 parses DECIMAL via s.parse::\u003cf64\u003e() which loses precision beyond 15 significant digits. High-precision financial DECIMALs get silently rounded. Fix: return as string, or detect precision and only parse when safe.","status":"closed","priority":2,"issue_type":"bug","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T00:47:04.254406781-07:00","created_by":"Cecil","updated_at":"2026-02-21T01:03:05.651191011-07:00","closed_at":"2026-02-21T01:03:05.651191011-07:00","close_reason":"implemented in batch 2"}
{"id":"mysql-mcp-03a","title":"Refine SELECT * warning to exclude LIMIT queries","description":"The 'SELECT * returns all columns' parse warning in src/sql_parser.rs fires on SELECT * FROM my_table LIMIT 10, which is a reasonable schema exploration query. The warning should only fire when: (1) there is no LIMIT clause, AND (2) the query targets a named (non-system) table. Similarly, the 'No WHERE clause' warning should be suppressed when a LIMIT is present. This reduces warning noise and prevents LLMs from learning to ignore all warnings.","status":"closed","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T03:25:32.246425545-07:00","created_by":"Cecil","updated_at":"2026-02-21T03:35:46.76548167-07:00","closed_at":"2026-02-21T03:35:46.76548167-07:00","close_reason":"SELECT * warning now suppressed when LIMIT is present (exploration queries are fine)"}
{"id":"mysql-mcp-05r","title":"Add mysql_schema_info tool (indexes, FK, constraints)","description":"Schema info is only exposed as MCP Resources, not Tools. LLMs cannot directly call a tool to list indexes, foreign keys, or constraints. ColumnInfo also lacks character_max_length, numeric_precision, numeric_scale, column_comment. Fix: add mysql_schema_info tool with include parameter.","status":"closed","priority":2,"issue_type":"feature","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T00:47:13.837175368-07:00","created_by":"Cecil","updated_at":"2026-02-21T01:19:22.34309673-07:00","closed_at":"2026-02-21T01:19:22.34309673-07:00","close_reason":"implemented in batch 3b"}
{"id":"mysql-mcp-0c3","title":"Add explicit handlers for BIT, YEAR, JSON, ENUM column types","description":"column_to_json in read.rs has no explicit handlers for BIT, YEAR, JSON, ENUM, SET, VARBINARY. They fall through to string/bytes fallback which works accidentally but is fragile across MySQL versions. Fix: add explicit type handlers.","status":"closed","priority":2,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T00:47:09.471476451-07:00","created_by":"Cecil","updated_at":"2026-02-21T01:03:05.750414659-07:00","closed_at":"2026-02-21T01:03:05.750414659-07:00","close_reason":"implemented in batch 2"}
{"id":"mysql-mcp-0nn","title":"Project Bootstrap","description":"Initialize the Rust project structure, pre-commit hooks, CI, and release pipeline","status":"closed","priority":2,"issue_type":"epic","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:42:02.548187877-07:00","created_by":"Cecil","updated_at":"2026-02-20T05:46:11.687922921-07:00","closed_at":"2026-02-20T05:46:11.687922921-07:00","close_reason":"Epic grouping only"}
{"id":"mysql-mcp-0no","title":"Fix SQL injection in schema.rs info_schema queries","description":"fetch_tables() and fetch_columns() interpolate db/table names directly into SQL strings (format\\!(\"AND table_schema = '{}'\", d), lines 228, 267, 279 of src/schema.rs). A malicious table name could execute arbitrary SQL. Fix: use backtick-escaped identifiers.","status":"closed","priority":0,"issue_type":"bug","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T00:46:50.402149655-07:00","created_by":"Cecil","updated_at":"2026-02-21T00:58:42.54384188-07:00","closed_at":"2026-02-21T00:58:42.54384188-07:00","close_reason":"implemented in batch 1"}
{"id":"mysql-mcp-0np","title":"Extract serialize_response() helper to eliminate 10 duplicate blocks","description":"## Problem\nsrc/server.rs contains 10 nearly identical blocks for serializing a serde_json::Value to a string:\n\n    Content::text(match serde_json::to_string_pretty(\u0026output) {\n        Ok(s) =\u003e s,\n        Err(e) =\u003e {\n            tracing::error\\!(\"Failed to serialize response: {}\", e);\n            return Ok(CallToolResult::error(vec\\![Content::text(format\\!(\n                \"Internal error: failed to serialize response: {}\", e\n            ))]));\n        }\n    })\n\nLocations: approximately lines 489-497, 568-576, 777-785, 821-829, 887-895, 960-968, 1160-1168, 1206-1214, 1235-1243, 1353-1354 (verify by grepping for 'Failed to serialize response').\n\n## Fix\nAdd a small helper function near the top of server.rs (or in a new src/response.rs):\n\n    fn json_to_text(value: \u0026serde_json::Value) -\u003e Result\u003cContent, McpError\u003e {\n        match serde_json::to_string_pretty(value) {\n            Ok(s) =\u003e Ok(Content::text(s)),\n            Err(e) =\u003e {\n                tracing::error\\!(\"Failed to serialize response: {}\", e);\n                Err(McpError::internal_error(\n                    format\\!(\"Internal error: failed to serialize response: {}\", e),\n                    None,\n                ))\n            }\n        }\n    }\n\nOr if returning CallToolResult::error is required (not McpError), use:\n\n    fn serialize_response(value: \u0026serde_json::Value) -\u003e Result\u003cString, CallToolResult\u003e {\n        serde_json::to_string_pretty(value).map_err(|e| {\n            tracing::error\\!(\"Failed to serialize response: {}\", e);\n            CallToolResult::error(vec\\![Content::text(format\\!(\n                \"Internal error: failed to serialize response: {}\", e\n            ))])\n        })\n    }\n\nThen replace all 10 occurrences with a call to this helper. Use ? or map_err as needed at each call site.\n\nNote: serde_json::to_string_pretty only fails for types with non-string map keys or recursive structures — our JSON values are always serializable, so this error path is theoretical. The real value is DRY code.\n\n## Verification\n- cargo test passes 163/163\n- grep 'Failed to serialize response' in src/server.rs shows 1 occurrence (in the helper), not 10","status":"closed","priority":2,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T09:36:17.653828007-07:00","created_by":"Cecil","updated_at":"2026-02-21T10:09:47.399082958-07:00","closed_at":"2026-02-21T10:09:47.399082958-07:00","close_reason":"Closed"}
{"id":"mysql-mcp-0oo","title":"Consolidate SQL parsing: parse once, pass AST downstream","description":"## Problem\nSQL is parsed 2-3 times per query request:\n\n1. src/server.rs:1017 — parse_sql() to get ParsedStatement (StatementType + metadata)\n2. src/query/read.rs:40-52 — parse_warnings() internally re-parses the SQL string to get the AST\n3. src/query/read.rs:68 — check_limit_presence() re-parses again to detect existing LIMIT\n4. src/sql_parser.rs:486 — extract_where_columns() re-parses yet again for suggestions\n\nEach parse call to sqlparser-rs takes ~1-2ms. On a remote DB with 130ms RTT, this adds meaningful overhead and complicates the data flow.\n\nRoot cause: parse_warnings(), parse_write_warnings(), and extract_where_columns() each accept a \u0026str and call sqlparser internally, rather than accepting a pre-parsed AST.\n\n## Fix\nRefactor sql_parser.rs so that:\n1. ParsedStatement holds the parsed AST (or a relevant subset) alongside the StatementType\n2. parse_warnings() accepts the already-parsed ParsedStatement (or AST slice) instead of re-parsing\n3. check_limit_presence() uses the LIMIT node already in the ParsedStatement\n4. extract_where_columns() accepts the ParsedStatement's WHERE clause directly\n\nThis may require making sqlparser types part of ParsedStatement, or extracting the useful bits (limit present, where columns, wildcard present) into the struct at parse time and caching them.\n\nApproach: Add fields to ParsedStatement:\n- has_limit: bool\n- has_where: bool\n- has_wildcard: bool\n- where_columns: Vec\u003cString\u003e\n- target_table: Option\u003cString\u003e\n- target_schema: Option\u003cString\u003e\n\nPopulate these once during parse_sql(). Then parse_warnings() and check_limit_presence() read from these fields rather than re-parsing.\n\n## Verification\n- cargo test passes 163/163\n- cargo clippy -- -D warnings passes\n- Confirm with tracing that parse() is called once per query (add tracing::trace at the parse entry point, run a test query, count invocations)","status":"open","priority":2,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T09:38:22.645623737-07:00","created_by":"Cecil","updated_at":"2026-02-21T09:38:22.645623737-07:00"}
{"id":"mysql-mcp-0p7","title":"Statement-type-aware read-only transaction routing","description":"Make the read-only transaction decision driven by parser certainty about read-safety, rather than a global config flag. Remove the overlapping security.disable_read_only_transactions dead code.\n\nCurrent state:\n- readonly_transaction: bool in PoolConfig controls whether ALL reads use the 4-RTT transaction path\n- security.disable_read_only_transactions exists in SecurityConfig but is not wired into execute_read_query — dead code\n- Default is true (always use transaction), costing ~160ms overhead even for plain SELECTs\n\nTarget behaviour — execute_read_query inspects StatementType and decides per-query:\n\nDefinitely read-only → 1-RTT bare fetch_all (no transaction):\n  - SELECT — by definition cannot modify data\n  - SHOW — metadata only\n  - EXPLAIN — query plan only\n  - DESCRIBE / DESC — schema info\n\nUncertain → 4-RTT read-only transaction (safety net):\n  - CALL — stored procedure may execute DML internally\n  - Other / unrecognised — fall through to safe path\n\nPractical effect: in normal LLM usage virtually every query routed to execute_read_query is SELECT or SHOW, so all users get the 1-RTT path by default with no config change needed.\n\nConfig changes:\n- Remove security.disable_read_only_transactions from SecurityConfig (dead code, never wired up)\n- Keep pool.readonly_transaction as an opt-in override: when true, force the 4-RTT transaction even on known-safe statements (maximum paranoia mode). Default changes to false since the per-statement logic now handles safety correctly.\n- Remove the env var MYSQL_DISABLE_READ_ONLY_TRANSACTIONS (was for the dead flag)\n- Keep MYSQL_READONLY_TRANSACTION for the override flag\n\nImplementation:\n- execute_read_query signature: remove the readonly_transaction bool param (or keep as override)\n- Add StatementType param (already parsed upstream in server.rs before the call)\n- Internally: match statement_type { Select | Show | Explain | Describe =\u003e fetch_all, _ =\u003e transaction_path }\n- Update all callers (server.rs, perf_tests.rs, integration tests)\n\nVerification:\n- cargo test passes\n- perf_read_isolation_comparison shows SELECT path hits 1-RTT (~107ms) by default without any config\n- CALL still uses transaction path (test with a stored procedure if available)","status":"closed","priority":2,"issue_type":"feature","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T14:38:17.920474759-07:00","created_by":"Cecil","updated_at":"2026-02-20T15:17:00.057278561-07:00","closed_at":"2026-02-20T15:17:00.057278561-07:00","close_reason":"Closed"}
{"id":"mysql-mcp-11m","title":"E2E tests: MCP protocol over stdio","description":"Spawn the compiled binary as a subprocess, communicate via stdin/stdout using MCP JSON-RPC protocol. Test: initialize handshake, list tools, list resources, call mysql_query (read), call mysql_query (write, gated), read table resource. Verify protocol compliance.","status":"closed","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:43:21.712867959-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:12:17.585455437-07:00","closed_at":"2026-02-20T06:12:17.585455437-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-11m","depends_on_id":"mysql-mcp-b47","type":"blocks","created_at":"2026-02-20T05:43:58.243146977-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-11m","depends_on_id":"mysql-mcp-bgk","type":"blocks","created_at":"2026-02-20T05:43:58.259311213-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-11m","depends_on_id":"mysql-mcp-4km","type":"blocks","created_at":"2026-02-20T05:43:58.275397252-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-18w","title":"Add fail-fast config validation on startup","description":"Invalid MYSQL_PORT=abc, MYSQL_POOL_SIZE=0, MYSQL_QUERY_TIMEOUT=invalid all silently fall back to defaults. ALLOW_INSERT_OPERATION=maybe treated as false. remote.enabled=true without secret_key only warns. Fix: add Config::validate() with meaningful startup errors.","status":"closed","priority":2,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T00:47:32.072809513-07:00","created_by":"Cecil","updated_at":"2026-02-21T01:19:22.389223524-07:00","closed_at":"2026-02-21T01:19:22.389223524-07:00","close_reason":"implemented in batch 3b"}
{"id":"mysql-mcp-19m","title":"HTTP remote transport (IS_REMOTE_MCP mode)","description":"When IS_REMOTE_MCP=true, serve MCP over HTTP using axum (or hyper). Stateless request/response. Require Authorization: Bearer \u003cREMOTE_SECRET_KEY\u003e header. Listen on configurable PORT. Support same tool/resource handlers as stdio mode.","status":"closed","priority":2,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:43:02.001646519-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:09:01.217128926-07:00","closed_at":"2026-02-20T06:09:01.217128926-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-19m","depends_on_id":"mysql-mcp-b47","type":"blocks","created_at":"2026-02-20T05:43:58.074988716-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-19m","depends_on_id":"mysql-mcp-bgk","type":"blocks","created_at":"2026-02-20T05:43:58.092638969-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-19m","depends_on_id":"mysql-mcp-4km","type":"blocks","created_at":"2026-02-20T05:43:58.112437281-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-1a9","title":"Fix false-positive 'No WHERE clause' warning when LIMIT is present","description":"In src/sql_parser.rs, the 'No WHERE clause — full table scan likely' warning fires for queries like SELECT * FROM orders LIMIT 10, which is a perfectly reasonable exploration query. The condition is has_named_table \u0026\u0026 \\!has_where; it should also require \\!has_limit. LLMs will learn to ignore warnings that fire constantly on valid queries. Fix: add \u0026\u0026 \\!has_limit to the warning condition.","status":"closed","priority":1,"issue_type":"bug","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T03:24:49.27205097-07:00","created_by":"Cecil","updated_at":"2026-02-21T03:35:46.724217466-07:00","closed_at":"2026-02-21T03:35:46.724217466-07:00","close_reason":"No WHERE clause warning now suppressed when LIMIT is present"}
{"id":"mysql-mcp-1au","title":"Integration tests: multi-DB mode and schema permissions","description":"Requires MySQL with multiple databases. Test multi-DB queries with fully-qualified names. Test MULTI_DB_WRITE_MODE flag. Test schema-specific permission overrides (allow write on schema A, deny on schema B).","status":"closed","priority":2,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:43:21.691408301-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:09:59.49026631-07:00","closed_at":"2026-02-20T06:09:59.49026631-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-1au","depends_on_id":"mysql-mcp-66e","type":"blocks","created_at":"2026-02-20T05:43:58.226937165-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-1d5","title":"Remove MySQL 5.7 (v1) EXPLAIN JSON schema support","description":"## Problem\nsrc/query/explain.rs contains two separate EXPLAIN JSON parsers:\n- v2 parser (lines 131-162, ~30 lines): for MySQL 8.0+ which uses { 'query_block': { 'inputs': [...] } }\n- v1 parser (lines 164-252, ~90 lines): for MySQL 5.7/8.1 which uses deeply nested { 'query_block': { 'ordering_operation': { 'grouping_operation': { 'nested_loop': [...] } } } }\n\nThe v1 format is detected by checking for absence of 'inputs' key (line 130).\n\nThe real MySQL server being tested against is version 9.6.0-cloud (confirmed from live test output), which uses v2 format. The MySQL 5.7 EOL was October 2023.\n\n## Validation first\nBefore removing, check:\n1. Does the project have any MySQL 5.7 CI targets or documented support matrix?\n2. Search README.md for any MySQL version requirements stated.\n3. Run the explain integration tests against the real DB (cargo test explain) — they should all pass with v2 only.\n4. Check if any unit tests in explain.rs use v1-format EXPLAIN JSON fixtures — if so, those tests would need removal too.\n\n## Fix\nIf MySQL 5.7 is not supported:\n1. Remove the v1 parser: walk_v1_node() function (lines ~198-252), V1Stats struct (lines ~165-185), and the v1 detection branch (lines ~128-163)\n2. Keep only the v2 walk_plan_node() logic\n3. Remove or update any unit tests that use v1-format JSON fixtures\n4. Update docs/comments to state MySQL 8.0+ requirement\n\n## Verification\n- cargo test explain passes (all explain integration tests against real DB should still pass)\n- explain.rs is ~90 lines shorter\n- The real DB (MySQL 9.6.0-cloud) still gets correct EXPLAIN results","status":"closed","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T09:38:53.87127888-07:00","created_by":"Cecil","updated_at":"2026-02-21T09:51:55.846875173-07:00","closed_at":"2026-02-21T09:51:55.846875173-07:00","close_reason":"Removed V1Stats, walk_v1_node(), and v1 detection branch from explain.rs. All remaining tests pass."}
{"id":"mysql-mcp-1gg","title":"Testing","description":"Unit, integration, and E2E tests with CI integration","status":"closed","priority":2,"issue_type":"epic","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:42:02.62282529-07:00","created_by":"Cecil","updated_at":"2026-02-20T05:46:11.772065059-07:00","closed_at":"2026-02-20T05:46:11.772065059-07:00","close_reason":"Epic grouping only"}
{"id":"mysql-mcp-1gq","title":"SQL statement type detection","description":"Use sqlparser crate (dialect: MySQL) to parse SQL and identify statement type: SELECT, INSERT, UPDATE, DELETE, CREATE, ALTER, DROP, TRUNCATE, USE, SHOW, etc. Extract target schema/database name from statement for permission checks. This is the Rust equivalent of node-sql-parser.","status":"closed","priority":0,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:42:47.609651837-07:00","created_by":"Cecil","updated_at":"2026-02-20T05:56:33.454042617-07:00","closed_at":"2026-02-20T05:56:33.454042617-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-1gq","depends_on_id":"mysql-mcp-e89","type":"blocks","created_at":"2026-02-20T05:43:57.884073604-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-1hq","title":"Integration tests: Unix socket connection","description":"Test connecting to MySQL via MYSQL_SOCKET_PATH instead of host:port. Requires MySQL running with socket enabled (available on Linux CI runners). Verify queries work identically over socket. Socket path takes precedence when both socket and host are set.","status":"closed","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:47:11.215889129-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:09:59.579138962-07:00","closed_at":"2026-02-20T06:09:59.579138962-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-1hq","depends_on_id":"mysql-mcp-h49","type":"blocks","created_at":"2026-02-20T05:47:22.758128424-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-1oc","title":"Add integration tests for key config options","description":"Several behavior-affecting config options have zero test coverage: pool.readonly_transaction (verify 4-RTT vs 1-RTT path is actually taken), pool.warmup_connections (verify connections are pre-created at startup), security.allow_runtime_connections=false (verify mysql_connect is blocked), connection.socket (verify Unix socket path is used instead of TCP). Add integration tests using setup_test_db() for each of these, skipping gracefully when the feature can't be exercised in CI.","status":"closed","priority":2,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T03:25:12.636203759-07:00","created_by":"Cecil","updated_at":"2026-02-21T03:58:44.997193368-07:00","closed_at":"2026-02-21T03:58:44.997193368-07:00","close_reason":"Added 8 unit tests covering key config options"}
{"id":"mysql-mcp-1uq","title":"Named sessions: runtime DB connections via mysql_connect/disconnect","description":"Add multi-session support so an LLM can connect to additional databases at runtime (e.g. prod vs staging) without restarting the MCP server.\n\n## New tools\n- mysql_connect(name, host, port, user, password?, database?, ssl?, preset?) — creates a named session; raw creds require allow_runtime_connections=true; preset loads from [[connections.\u003cname\u003e]] toml block\n- mysql_disconnect(name) — explicitly drop a session (optional; idle timeout handles cleanup)\n- mysql_list_sessions — list active sessions with host/db/idle_seconds; hidden from output when only the default session exists\n\n## Session routing\nAll existing tools (mysql_query, mysql_multi_query, mysql_schema_info, mysql_server_info) gain an optional 'session' param. Omitting it (or passing 'default') uses the startup connection. 'default' is never shown in mysql_list_sessions output when it is the only session.\n\n## Lifecycle\n- Startup connection is always available as 'default'\n- Sessions are stored in Arc\u003ctokio::sync::Mutex\u003cHashMap\u003cString, Session\u003e\u003e\u003e on McpServer\n- Each Session tracks: pool, last_used Instant\n- Background task (tokio::spawn) checks every 60s, drops sessions idle \u003e 10 minutes; default session is never dropped\n- Reconnection is transparent: sqlx acquire() reconnects automatically\n\n## Config additions (src/config/)\n- PoolConfig: allow_runtime_connections: bool (default false)\n- Env: MYSQL_ALLOW_RUNTIME_CONNECTIONS\n- Toml: [connections.staging], [connections.prod] named preset blocks (same fields as root connection)\n- Validation: if allow_runtime_connections=true, warn in logs (credentials will appear in tool params)\n\n## Security\n- Raw credential passing gated behind allow_runtime_connections=true\n- Passwords never logged (tracing::debug! only shows name/host/db)\n- Preset-based connections always allowed regardless of flag","status":"closed","priority":2,"issue_type":"feature","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T02:14:25.527799822-07:00","created_by":"Cecil","updated_at":"2026-02-21T02:26:19.942794147-07:00","closed_at":"2026-02-21T02:26:19.942794147-07:00","close_reason":"Implemented: mysql_connect/disconnect/list_sessions tools, Arc\u003cMutex\u003cHashMap\u003e\u003e session store, 10-min idle reaper, MYSQL_ALLOW_RUNTIME_CONNECTIONS config, session routing on all existing tools."}
{"id":"mysql-mcp-234","title":"Add pre-commit hooks","description":"Install pre-commit framework config (.pre-commit-config.yaml). Hooks: cargo fmt --check, cargo clippy -- -D warnings, cargo test. Add Makefile or justfile targets for local hook install.","status":"closed","priority":1,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:42:16.077393015-07:00","created_by":"Cecil","updated_at":"2026-02-20T05:56:33.478429824-07:00","closed_at":"2026-02-20T05:56:33.478429824-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-234","depends_on_id":"mysql-mcp-e89","type":"blocks","created_at":"2026-02-20T05:43:57.623188474-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-26b","title":"Unit/integration tests: error handling and edge cases","description":"Test: malformed/unparseable SQL returns structured MCP error, permission denied returns clear error message (not panic), query timeout returns timeout error, empty result sets, NULL values in results, very large result sets, SQL with semicolons/comments, statements that are valid SQL but unsupported types.","status":"closed","priority":2,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:47:11.073748626-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:09:59.512868962-07:00","closed_at":"2026-02-20T06:09:59.512868962-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-26b","depends_on_id":"mysql-mcp-1gq","type":"blocks","created_at":"2026-02-20T05:47:22.584684191-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-26b","depends_on_id":"mysql-mcp-99u","type":"blocks","created_at":"2026-02-20T05:47:22.606474338-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-26b","depends_on_id":"mysql-mcp-2gl","type":"blocks","created_at":"2026-02-20T05:47:22.62894943-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-26b","depends_on_id":"mysql-mcp-nle","type":"blocks","created_at":"2026-02-20T05:47:22.648425607-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-2c3","title":"Unit tests: config parsing and merge","description":"Test TOML config loading, env var parsing, merge precedence, connection string parsing, schema permission parsing. Use temp env vars and in-memory TOML strings. No MySQL needed.","status":"closed","priority":1,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:43:21.596096333-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:05:58.217585214-07:00","closed_at":"2026-02-20T06:05:58.217585214-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-2c3","depends_on_id":"mysql-mcp-lok","type":"blocks","created_at":"2026-02-20T05:43:58.13022432-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-2gl","title":"Read-only query execution","description":"Execute SELECT/SHOW queries inside a read-only transaction (SET TRANSACTION READ ONLY). Return results as JSON. Track execution time with std::time::Instant. Include row count and timing in response.","status":"closed","priority":1,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:42:47.64776567-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:05:07.14345895-07:00","closed_at":"2026-02-20T06:05:07.14345895-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-2gl","depends_on_id":"mysql-mcp-h49","type":"blocks","created_at":"2026-02-20T05:43:57.702991535-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-2gl","depends_on_id":"mysql-mcp-99u","type":"blocks","created_at":"2026-02-20T05:43:57.718432234-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-2ye","title":"Remove efficiency metric from query response","description":"## Problem\nsrc/query/read.rs:137-150 computes and returns an 'efficiency' metric:\n\n    let efficiency: Option\u003cf64\u003e = if explain_result.rows_examined_estimate == 0 {\n        Some(1.0)\n    } else if row_count == 0 {\n        None\n    } else {\n        Some(f64::min(1.0, row_count as f64 / explain_result.rows_examined_estimate as f64))\n    };\n\nThis is rows_returned / rows_examined, capped at 1.0, null for empty results.\n\n## Why it's questionable\n1. The same information is already conveyed more actionably by: full_table_scan (bool), rows_examined_estimate (int), filtered_pct (float), and tier (fast/slow/very_slow). An LLM can derive the ratio itself if needed.\n2. The metric conflates two unrelated cases: bad query design (full scan, poor WHERE) vs. intentional filtering (WHERE that returns a small fraction). There's no way to distinguish.\n3. It's only computed when EXPLAIN runs (when performance_hints != 'none' or explain:true is passed), making it inconsistently present in responses.\n4. It's redundant with the plan object — if plan is null (no EXPLAIN ran), efficiency is also null, so they always appear together.\n\n## Fix\nRemove the efficiency field from ExplainResult (src/query/explain.rs), remove the computation in read.rs:137-150, and remove it from the JSON output in server.rs (wherever it's serialized into the response map). \n\nCheck if any tests assert on efficiency and update them.\n\nAlternatively, if keeping it, move the computation inside explain.rs so it's always present when EXPLAIN ran, and document what an LLM should do with it (e.g., 'if efficiency \u003c 0.1 and full_table_scan, consider adding an index').\n\n## Verification\n- cargo test passes 163/163\n- grep for 'efficiency' in src/ shows no remaining references in response serialization\n- The Python MCP test at /tmp/test-mcp.py test 3 checked that efficiency was null for empty results — update or remove that assertion","status":"closed","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T09:38:09.161737062-07:00","created_by":"Cecil","updated_at":"2026-02-21T10:09:47.380276286-07:00","closed_at":"2026-02-21T10:09:47.380276286-07:00","close_reason":"Closed"}
{"id":"mysql-mcp-35m","title":"Prepared statement cache tuning and query normalization","description":"Improve prepared statement cache hit rates for LLM workloads by tuning sqlx's per-connection statement cache and optionally normalizing queries to a canonical parameterized form.\n\nBackground:\nsqlx maintains a per-connection LRU cache of prepared statement handles (statement_cache_capacity, default 100). When the LLM sends structurally identical queries with different literal values ('WHERE id = 1', 'WHERE id = 2'), the same prepared statement handle is reused — saving the prepare round-trip. When the structure varies ('SELECT *' vs specific columns), the cache thrashes.\n\nTwo independent improvements:\n\n1. Expose statement_cache_capacity as config (easy):\n   - pool.statement_cache_capacity: u32 (default 100)\n   - Env var: MYSQL_STATEMENT_CACHE_CAPACITY\n   - Applied via MySqlPoolOptions::statement_cache_capacity()\n   - No behaviour change, just tunability\n\n2. Query normalization (more complex, higher value):\n   Transform queries with literal values into parameterized form before preparing, then bind the extracted values. Example:\n     Input:  SELECT * FROM users WHERE id = 42 AND status = 'active'\n     Normal: SELECT * FROM users WHERE id = ? AND status = ?\n     Params: [42, 'active']\n   \n   This means 'WHERE id = 1' and 'WHERE id = 2' hit the same prepared statement — the cache hit rate on LLM workloads (which generate many structurally-similar queries) could be very high.\n\n   Implementation considerations:\n   - Normalization must be lossless (values become bind params, not discarded)\n   - Use the sqlparser AST to identify literal values in WHERE, VALUES, LIMIT, OFFSET clauses\n   - Replace with Expr::Value(Value::Placeholder('?')) and collect extracted values\n   - Use sqlx::query() with .bind() for each extracted value\n   - Only apply to read queries initially; writes are more sensitive to type coercion\n\n   Risk: type inference — MySQL's binary protocol infers types from bound values. A literal '1' vs integer 1 may behave differently. Test carefully with mixed-type WHERE clauses.\n\n   Add normalize_queries: bool (default false) to config — opt-in given the type inference risk.\n   Env var: MYSQL_NORMALIZE_QUERIES","status":"closed","priority":3,"issue_type":"feature","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T14:13:58.688798966-07:00","created_by":"Cecil","updated_at":"2026-02-20T15:22:53.765098026-07:00","closed_at":"2026-02-20T15:22:53.765098026-07:00","close_reason":"Closed"}
{"id":"mysql-mcp-3e8","title":"Validate session name and database name format","description":"mysql_connect accepts any non-empty string as a session name with no length or charset restriction. A multi-megabyte Unicode session name is accepted and stored in the HashMap. Similarly, database names from the 'database' parameter are forwarded with no validation. Add: max length 64 chars, restrict to alphanumeric + underscore + hyphen for session names (matching MySQL identifier rules). Return a clear error for invalid names.","status":"closed","priority":2,"issue_type":"bug","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T03:25:05.993868588-07:00","created_by":"Cecil","updated_at":"2026-02-21T04:04:31.015628362-07:00","closed_at":"2026-02-21T04:04:31.015628362-07:00","close_reason":"Session name validated: max 64 chars, alphanumeric/underscore/hyphen only"}
{"id":"mysql-mcp-3hz","title":"Add tests for named session lifecycle","description":"The entire session management system has zero test coverage: mysql_connect, mysql_disconnect, mysql_list_sessions, the idle reaper background task, and get_session routing. Critical paths to test: (1) create session, route query to it, disconnect; (2) default session is never dropped by reaper; (3) idle session is dropped after timeout; (4) querying non-existent session returns clear error; (5) allow_runtime_connections=false blocks mysql_connect.","status":"closed","priority":1,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T03:24:59.986702272-07:00","created_by":"Cecil","updated_at":"2026-02-21T03:54:15.555492731-07:00","closed_at":"2026-02-21T03:54:15.555492731-07:00","close_reason":"Added 3 e2e tests for named session connect/disconnect/routing/reserved-name"}
{"id":"mysql-mcp-3kq","title":"Replace get_session() 3-tuple with named struct","description":"## Problem\nsrc/server.rs:118-136 defines get_session() returning a 3-tuple:\n\n    async fn get_session(\u0026self, name: \u0026str)\n        -\u003e Result\u003c(sqlx::MySqlPool, Arc\u003cSchemaIntrospector\u003e, Option\u003cString\u003e), String\u003e\n\n4 of 5 callers immediately shadow two elements with _ prefixes:\n\n    let (pool, _introspector, _session_db) = match self.get_session(...).await { ... };  // lines 643, 805, 840, 935\n    let (query_pool, query_introspector, session_db) = match self.get_session(...).await { ... };  // line 1011\n\nThis is a code smell: returning values the caller immediately discards, with no names or documentation on what the three elements represent.\n\n## Fix\nDefine a small struct near the top of server.rs:\n\n    struct ResolvedSession {\n        pool: sqlx::MySqlPool,\n        introspector: Arc\u003cSchemaIntrospector\u003e,\n        database: Option\u003cString\u003e,\n    }\n\nChange get_session() to return Result\u003cResolvedSession, String\u003e, then update all 5 call sites to use field access instead of tuple destructuring. Callers that don't use introspector or database simply don't access those fields (no need to shadow with _).\n\n## Verification\n- cargo test passes 163/163\n- No _ prefix variable warnings in the updated call sites\n- Code compiles cleanly with cargo clippy -- -D warnings","status":"closed","priority":2,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T09:36:40.482055166-07:00","created_by":"Cecil","updated_at":"2026-02-21T10:09:47.390576827-07:00","closed_at":"2026-02-21T10:09:47.390576827-07:00","close_reason":"Closed"}
{"id":"mysql-mcp-3mu","title":"Fix LIMIT injection: use AST check not string match","description":"read.rs:62 uses sql.to_uppercase().contains(\"LIMIT\") which is fooled by LIMIT in comments, CTEs, or subqueries. Fix: check the parsed AST's limit field instead of string scanning.","status":"closed","priority":1,"issue_type":"bug","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T00:46:56.410039335-07:00","created_by":"Cecil","updated_at":"2026-02-21T01:03:05.196497178-07:00","closed_at":"2026-02-21T01:03:05.196497178-07:00","close_reason":"implemented in batch 2"}
{"id":"mysql-mcp-3o7","title":"Dispatch call_tool() via table instead of if/else chain","description":"## Problem\nsrc/server.rs:377-1251 is a single 875-line call_tool() method that dispatches to 8 tools via sequential string comparisons:\n\n    if request.name == \"mysql_connect\" { ... return ... }\n    if request.name == \"mysql_disconnect\" { ... return ... }\n    if request.name == \"mysql_list_sessions\" { ... return ... }\n    // ... 5 more if blocks ...\n    if request.name != \"mysql_query\" {\n        return Err(McpError::method_not_found(...))\n    }\n    // mysql_query logic\n\nProblems:\n- Adding a new tool requires knowing to add it before the final mysql_query block\n- Each handler block has early returns, making control flow hard to follow\n- The 875-line method is too large to hold in working memory\n- The final check 'if request.name != mysql_query' is a backwards guard that's easy to misread\n\n## Fix\nExtract each tool handler into its own async method on MySqlServer:\n\n    async fn handle_connect(\u0026self, args: serde_json::Map\u003c...\u003e) -\u003e Result\u003cCallToolResult, McpError\u003e { ... }\n    async fn handle_disconnect(\u0026self, args: ...) -\u003e Result\u003c...\u003e { ... }\n    // etc.\n\nThen call_tool() becomes a clean dispatch:\n\n    async fn call_tool(\u0026self, request: CallToolRequestParams, ctx: ...) -\u003e ... {\n        let args = request.arguments.unwrap_or_default();\n        match request.name.as_str() {\n            \"mysql_connect\"       =\u003e self.handle_connect(args).await,\n            \"mysql_disconnect\"    =\u003e self.handle_disconnect(args).await,\n            \"mysql_list_sessions\" =\u003e self.handle_list_sessions(args).await,\n            \"mysql_query\"         =\u003e self.handle_query(args).await,\n            \"mysql_multi_query\"   =\u003e self.handle_multi_query(args).await,\n            \"mysql_schema_info\"   =\u003e self.handle_schema_info(args).await,\n            \"mysql_server_info\"   =\u003e self.handle_server_info(args).await,\n            \"mysql_explain_plan\"  =\u003e self.handle_explain_plan(args).await,\n            name =\u003e Err(McpError::method_not_found(\n                format!(\"Unknown tool: {}\", name), None\n            )),\n        }\n    }\n\nThis makes call_tool() ~20 lines, each handler is independently testable, and adding a tool is a 1-line match arm + new method.\n\nNote: This is a refactor, not a behavior change. All existing tests must pass unchanged.\n\n## Verification\n- cargo test passes 163/163\n- cargo clippy -- -D warnings passes\n- call_tool() function body is \u003c 30 lines\n- Each tool handler is a separate method, independently readable","status":"open","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T09:41:30.705903842-07:00","created_by":"Cecil","updated_at":"2026-02-21T09:41:30.705903842-07:00"}
{"id":"mysql-mcp-3rz","title":"Phase 1: Parse-time query analysis warnings","description":"Using the sqlparser AST already built for every query, detect anti-patterns before the query hits the DB (zero extra RTT). Surface them as parse_warnings: [] in the JSON response when performance_hints is 'hints', 'auto', or 'always'.\n\nPatterns to detect (all from AST, no DB round-trip):\n- SELECT * with no explicit column projection\n- SELECT FROM \u003ctable\u003e with no WHERE clause (potential full table scan)\n- LIKE '%...' — leading wildcard, cannot use a B-tree index\n- High join count (3+ tables joined without obvious filter predicate)\n- No LIMIT on a query that could return unbounded rows (non-aggregate SELECT)\n- ORDER BY on expression that may not be indexed (basic heuristic)\n\nImplementation:\n- Add QueryAnalysis struct to src/sql_parser.rs or a new src/query/analysis.rs\n- analyze(parsed: \u0026ParsedStatement) -\u003e Vec\u003cString\u003e — returns warning strings\n- Call from execute_read_query when performance_hints != 'none'\n- Add parse_warnings: Vec\u003cString\u003e to QueryResult\n- Include in MCP response JSON\n\nThe warnings should be concise, LLM-readable strings like:\n- \"No WHERE clause — full table read likely\"\n- \"SELECT * returns all columns — specify needed columns for efficiency\"\n- \"LIKE '%...' uses leading wildcard — index on this column cannot be used\"","status":"closed","priority":2,"issue_type":"feature","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T14:02:41.861593798-07:00","created_by":"Cecil","updated_at":"2026-02-20T15:47:54.316529179-07:00","closed_at":"2026-02-20T15:47:54.316529179-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-3rz","depends_on_id":"mysql-mcp-3sj","type":"blocks","created_at":"2026-02-20T14:04:06.126578669-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-3sj","title":"Add performance_hints config option","description":"Add a performance_hints setting to PoolConfig (and env var MYSQL_PERFORMANCE_HINTS) that controls how much query analysis the server performs.\n\nAccepted values:\n- \"none\" — no analysis, performance block omitted from response entirely (default)\n- \"hints\" — parse-time warnings only, zero extra RTT\n- \"auto\" — parse warnings always; EXPLAIN when execution_time_ms \u003e slow_query_threshold_ms OR a parse warning fired\n- \"always\" — EXPLAIN on every SELECT\n\nAlso add slow_query_threshold_ms config (default 500) as a companion setting that 'auto' mode uses to decide whether to run EXPLAIN post-execution.\n\nThis is the infrastructure issue that all performance analysis phases depend on. Config location: PoolConfig in src/config/mod.rs, env var in src/config/env_config.rs, TOML in mysql-mcp.toml.","status":"closed","priority":2,"issue_type":"feature","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T14:02:22.447831206-07:00","created_by":"Cecil","updated_at":"2026-02-20T15:20:59.195393026-07:00","closed_at":"2026-02-20T15:20:59.195393026-07:00","close_reason":"Closed"}
{"id":"mysql-mcp-3u1","title":"Add ssl_ca config for custom CA certificate bundles","description":"Add MYSQL_SSL_CA env var (and toml/cli equivalent) that accepts a path to a PEM CA bundle. Feed it into sqlx ConnectOptions::ssl_ca() so users behind corporate PKI or cloud DBs with private CAs can use SSL verification without disabling cert checks (ssl_accept_invalid_certs=true). This is the only remaining SSL gap — ssl/ssl_accept_invalid_certs already exist.","status":"closed","priority":2,"issue_type":"feature","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T02:10:23.253121631-07:00","created_by":"Cecil","updated_at":"2026-02-21T02:31:45.289851344-07:00","closed_at":"2026-02-21T02:31:45.289851344-07:00","close_reason":"Implemented: ssl_ca: Option\u003cString\u003e in SecurityConfig, MYSQL_SSL_CA env var, applied via MySqlConnectOptions::ssl_ca() in build_connect_options_from_config and build_session_pool. Also exposed as ssl_ca param on mysql_connect."}
{"id":"mysql-mcp-3xc","title":"Fix or delete non-functional remote MCP HTTP stub","description":"## Problem\nsrc/remote.rs:101-109 contains a stub handler that rejects every request:\n\n    async fn handle_mcp_request(...) -\u003e impl IntoResponse {\n        (StatusCode::NOT_IMPLEMENTED, Json(json!({\n            \"jsonrpc\": \"2.0\",\n            \"error\": { \"code\": -32601, \"message\": \"HTTP transport method routing not yet implemented\" }\n        })))\n    }\n\nSetting IS_REMOTE_MCP=true (or MYSQL_REMOTE_ENABLED after rename) starts an Axum HTTP server that auth-validates the bearer token and then rejects every request with NOT_IMPLEMENTED. The config system fully supports it (src/config/mod.rs:85-89, validation at 227-241 requires a secret key), but the transport is dead.\n\nThis is misleading — users who enable it thinking they get HTTP transport get nothing.\n\n## Options\nA) **Delete** remote.rs entirely, remove RemoteConfig from config, remove remote startup in main.rs, remove remote tests in src/remote.rs integration_tests. This is the simplest fix if HTTP transport is not a near-term goal.\nB) **Implement** basic JSON-RPC-over-HTTP routing using rmcp's HTTP transport support if it exists, otherwise proxy stdin/stdout.\nC) **Gate it with a compile-time feature flag** and mark it as experimental in docs.\n\nRecommended: Option A (delete) unless there's a specific roadmap commitment to HTTP transport.\n\n## Verification\n- cargo test passes\n- If deleted: grep for IS_REMOTE_MCP, REMOTE_SECRET_KEY, RemoteConfig, remote_enabled confirms no dangling references\n- If kept as stub: add a prominent doc comment and startup warning log so users know it's not functional","status":"closed","priority":1,"issue_type":"bug","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T09:36:05.561976193-07:00","created_by":"Cecil","updated_at":"2026-02-21T10:00:08.93169301-07:00","closed_at":"2026-02-21T10:00:08.93169301-07:00","close_reason":"Completed in Batch 1: remote.rs deleted, cli_parser.rs deleted, env vars renamed to MYSQL_* prefix, example TOML documented"}
{"id":"mysql-mcp-40l","title":"Evaluate and remove mysql_multi_query tool","description":"## Problem\nsrc/server.rs:580-787 implements mysql_multi_query — 208 lines to run N read-only queries in parallel using tokio tasks. The tool description says it 'saves N-1 round trips vs sequential mysql_query calls.'\n\nHowever:\n1. MCP clients (including Claude) call tools sequentially — one tool call must complete before the next is issued. There is no MCP protocol mechanism for concurrent tool calls from a single request.\n2. The parallelism only helps if the client issues a single mysql_multi_query call with N queries instead of N separate mysql_query calls. But the client could achieve the same latency by just calling mysql_query N times (the server-side parallelism in multi_query only saves the client-to-server RTTs between calls).\n3. The tool has 208 lines of server code + its own schema definition + tests, adding maintenance burden.\n4. The re-ordering logic (lines 673-714) to match results back to input order adds complexity.\n\n## Investigation needed before acting\nBefore removing, check:\n- Are there any tests specifically for mysql_multi_query that show it working correctly?\n- Is there a use case where a client sends a single message to Claude with a complex question requiring 3+ independent DB queries? (In that case, Claude might benefit from a single multi-query call to get all data at once vs. 3 sequential tool calls with API round-trips between them.)\n- Run the existing multi_query tests to confirm they pass: cargo test mysql_multi_query\n\n## Recommended action\nIf the use case is: 'Claude decides to ask 3 things, uses multi_query to get them in one tool call and save 2 API round-trips' — keep it but document this explicitly.\nIf no such use case is confirmed, remove the tool:\n- Delete the mysql_multi_query handler block in server.rs (lines ~580-787)\n- Remove the tool from list_tools() \n- Remove multi_schema and multi_tool definitions\n- Update README.md\n- Run cargo test and confirm 163 tests still pass (multi_query-specific tests will need deletion)\n\n## Verification\n- cargo test passes after any changes\n- If removed: grep for 'mysql_multi_query' in src/ confirms no dangling references","status":"closed","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T09:38:39.357110599-07:00","created_by":"Cecil","updated_at":"2026-02-21T10:09:47.369536496-07:00","closed_at":"2026-02-21T10:09:47.369536496-07:00","close_reason":"Closed"}
{"id":"mysql-mcp-4km","title":"Implement mysql://tables/{name} resource (schema)","description":"Register resource handler for mysql://tables/{tableName}. Returns column metadata: name, data_type, is_nullable, column_default, column_key (PRI/UNI/MUL), extra (auto_increment etc.).","status":"closed","priority":1,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:43:01.97773898-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:08:53.959746625-07:00","closed_at":"2026-02-20T06:08:53.959746625-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-4km","depends_on_id":"mysql-mcp-zho","type":"blocks","created_at":"2026-02-20T05:43:58.039842659-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-4km","depends_on_id":"mysql-mcp-x3n","type":"blocks","created_at":"2026-02-20T05:43:58.057285854-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-4v5","title":"Add mysql_explain_plan tool (explain without executing)","description":"Currently an LLM must execute a query to see its execution plan. There is no way to check query efficiency before running a potentially expensive query. Add a mysql_explain_plan tool that runs EXPLAIN FORMAT=JSON on the provided SQL without executing it, returning the same plan structure as the existing plan field in mysql_query responses. Parameters: sql (required), session (optional). This is especially useful for validating complex queries before committing to them.","status":"closed","priority":3,"issue_type":"feature","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T03:25:37.32777064-07:00","created_by":"Cecil","updated_at":"2026-02-21T04:13:17.395155925-07:00","closed_at":"2026-02-21T04:13:17.395155925-07:00","close_reason":"Added mysql_explain_plan tool: runs EXPLAIN FORMAT=JSON without executing the query, returns tier/efficiency/index_used"}
{"id":"mysql-mcp-56v","title":"Documentation","description":"README, config reference, and usage examples","status":"closed","priority":2,"issue_type":"epic","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:42:02.640343105-07:00","created_by":"Cecil","updated_at":"2026-02-20T05:46:11.791596941-07:00","closed_at":"2026-02-20T05:46:11.791596941-07:00","close_reason":"Epic grouping only"}
{"id":"mysql-mcp-5hr","title":"Database Layer","description":"sqlx MySQL connection pool, read/write transactions, multi-DB mode, SQL parsing, schema permissions","status":"closed","priority":2,"issue_type":"epic","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:42:02.587127358-07:00","created_by":"Cecil","updated_at":"2026-02-20T05:46:11.731720113-07:00","closed_at":"2026-02-20T05:46:11.731720113-07:00","close_reason":"Epic grouping only"}
{"id":"mysql-mcp-5nk","title":"Fix: SHOW TABLES/DATABASES broken when max_rows \u003e 0 (LIMIT appended to SHOW statement)","description":"In query/read.rs, the max_rows cap logic appends LIMIT {max_rows} to any SQL statement that lacks a LIMIT clause. MySQL does not support LIMIT on SHOW statements (SHOW TABLES, SHOW DATABASES, SHOW COLUMNS, etc.), causing a MySQL syntax error 1064.\n\nRepro: with default config (max_rows=1000), SHOW TABLES returns:\n  Query error: error returned from database: 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'LIMIT 1000' at line 1\n\nSHOW TABLES/DATABASES only work when MYSQL_MAX_ROWS=0.\n\nFix: the LIMIT append must be restricted to SELECT statements only. The condition in read.rs line 59 should check that stmt_type == StatementType::Select before appending LIMIT.\n\nThe max_rows cap makes no sense for SHOW statements which already return bounded result sets (table list, database list, etc.).\n\nObserved during E2E validation (mysql-mcp-dk0): both SHOW TABLES and SHOW DATABASES fail with default max_rows=1000.","status":"closed","priority":1,"issue_type":"bug","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T18:03:23.598699783-07:00","created_by":"Cecil","updated_at":"2026-02-20T18:10:16.220148634-07:00","closed_at":"2026-02-20T18:10:16.220148634-07:00","close_reason":"Fixed: LIMIT append now gated on StatementType::Select"}
{"id":"mysql-mcp-5z3","title":"Log EXPLAIN failures instead of silently dropping them","description":"In src/query/read.rs, the auto-EXPLAIN branch has Err(_) =\u003e None — any EXPLAIN failure (DB gone, MySQL version mismatch, network error) is silently swallowed. The user sees a successful query result with no plan field and no indication that EXPLAIN failed. Fix: log at tracing::warn! level with the error detail. Consider adding a plan_error field to the response so the LLM knows explain was attempted but failed.","status":"closed","priority":1,"issue_type":"bug","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T03:24:54.638529567-07:00","created_by":"Cecil","updated_at":"2026-02-21T03:36:30.959467839-07:00","closed_at":"2026-02-21T03:36:30.959467839-07:00","close_reason":"EXPLAIN failures now logged at warn level instead of silently discarded"}
{"id":"mysql-mcp-620","title":"Review and improve MCP tool descriptions","description":"The LLM's ability to use mysql_multi_query effectively depends on how well the tool descriptions communicate when to use each tool. Review and improve both tool descriptions in src/server.rs.\n\nThings to evaluate and improve:\n- mysql_query description: does it mention parse_warnings, plan, serialization_time_ms, capped fields so the LLM knows what to expect in responses?\n- mysql_multi_query description: is it clear enough about WHEN to use it vs mysql_query? (independent queries, no ordering dependency, all read-only) Does it convey the RTT benefit clearly enough that the LLM will actually reach for it?\n- The explain: bool parameter on mysql_query: is the description clear about when the LLM should use it and what it gets back?\n- Do the descriptions mention performance_hints=auto/always config so the LLM understands the plan block is conditional?\n\nTest by actually using a Claude session pointed at this server and observing whether it reaches for mysql_multi_query when appropriate, and whether it interprets parse_warnings and plan correctly.","status":"closed","priority":2,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T17:38:06.45619523-07:00","created_by":"Cecil","updated_at":"2026-02-20T18:17:36.837273598-07:00","closed_at":"2026-02-20T18:17:36.837273598-07:00","close_reason":"Improved tool descriptions to mention response fields (parse_warnings, plan, capped, execution_time_ms, serialization_time_ms, suggestions), parallel use case for mysql_multi_query (N-1 RTT savings), and clarified explain flag purpose (slow query investigation with index/rows detail)"}
{"id":"mysql-mcp-63f","title":"Integration tests: schema introspection cache","description":"Test: cache returns same result within TTL without re-querying MySQL (verify with query count), cache expires after TTL and re-fetches, cache is per-database in multi-DB mode, MYSQL_CACHE_TTL=0 disables caching.","status":"closed","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:47:11.167487722-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:09:59.534796156-07:00","closed_at":"2026-02-20T06:09:59.534796156-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-63f","depends_on_id":"mysql-mcp-x3n","type":"blocks","created_at":"2026-02-20T05:47:22.723745619-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-66e","title":"Multi-database mode","description":"When MYSQL_DB is empty, operate in multi-DB mode. Allow fully-qualified table references (schema.table). Enumerate all accessible databases from information_schema for resource listing. Enforce MULTI_DB_WRITE_MODE flag for write operations.","status":"closed","priority":2,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:42:47.703945636-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:08:57.687603939-07:00","closed_at":"2026-02-20T06:08:57.687603939-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-66e","depends_on_id":"mysql-mcp-x3n","type":"blocks","created_at":"2026-02-20T05:43:57.78359158-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-66e","depends_on_id":"mysql-mcp-99u","type":"blocks","created_at":"2026-02-20T05:43:57.799554018-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-6g3","title":"Apply progressive disclosure to tool response design","description":"Audit all tool responses against MCP progressive disclosure best practices: (1) mysql_query returns minimal by default, plan/warnings opt-in; (2) mysql_schema_info uses include:[columns,indexes,foreign_keys] array; (3) capped results return next_cursor for pagination; (4) tool descriptions document which fields appear at which detail levels.","status":"closed","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T00:48:29.952117989-07:00","created_by":"Cecil","updated_at":"2026-02-21T01:26:44.00406034-07:00","closed_at":"2026-02-21T01:26:44.00406034-07:00","close_reason":"implemented in final batch"}
{"id":"mysql-mcp-77o","title":"Integration tests: read queries","description":"Requires MySQL. Test SELECT queries, SHOW statements, information_schema queries. Test read-only transaction enforcement (writes inside read txn should fail). Set up test fixtures (test DB + seed data).","status":"closed","priority":2,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:43:21.644986046-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:09:59.424401029-07:00","closed_at":"2026-02-20T06:09:59.424401029-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-77o","depends_on_id":"mysql-mcp-2gl","type":"blocks","created_at":"2026-02-20T05:43:58.176972867-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-7ah","title":"Fix: capped:true set whenever LIMIT appended, even when result is not actually capped","description":"In query/read.rs, the capped field is set to true whenever max_rows \u003e 0 and no LIMIT clause is present, regardless of whether the actual result set was truncated. For example, SELECT 1 AS val returns row_count: 1 with capped: true even though max_rows=1000 and only 1 row was returned.\n\nThe correct semantics for capped: true is: the result was truncated because it hit the max_rows limit (i.e., row_count == max_rows AND more rows may exist).\n\nFix: only set capped = true after executing the query when row_count equals max_rows. The current code sets was_capped = true at the LIMIT-append step, before executing the query.\n\nObserved during E2E validation (mysql-mcp-dk0): SELECT 1 AS val returns capped: true with row_count: 1 and default max_rows=1000. Similarly, a query returning 409 rows with max_rows=1000 also shows capped: true.","status":"closed","priority":2,"issue_type":"bug","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T18:03:13.084530221-07:00","created_by":"Cecil","updated_at":"2026-02-20T18:10:16.256227668-07:00","closed_at":"2026-02-20T18:10:16.256227668-07:00","close_reason":"Fixed: was_capped now set after execution based on actual row count vs cap"}
{"id":"mysql-mcp-7f3","title":"Expand suggestions: handle composite indexes and low-cardinality columns","description":"## Problem\nThe suggestions system (src/server.rs:1067-1095) suggests CREATE INDEX statements when EXPLAIN detects a full-table-scan. Currently it only suggests single-column indexes and has two known issues:\n\n1. **Composite index blindness**: If WHERE clause is 'WHERE a = 1 AND b = 2' and a composite index on (a, b) already exists, the system still suggests 'CREATE INDEX idx_t_a ON t(a)' because list_indexed_columns() returns individual indexed columns, not composite index membership. Fix: use SHOW INDEX FROM which returns Key_name and Seq_in_index — group by Key_name to detect composite indexes and check if all WHERE cols are covered by a single composite index before suggesting.\n\n2. **Low-cardinality columns ignored**: Suggesting an index on a boolean or enum column (very low cardinality) is usually counterproductive — MySQL's optimizer often ignores such indexes. Fix: check column cardinality from SHOW INDEX (Cardinality field) or from INFORMATION_SCHEMA.COLUMNS. Skip suggestions for columns where cardinality \u003c 10 or where type is TINYINT(1) / ENUM.\n\n3. **Multi-column suggestion**: When WHERE has multiple unindexed columns (a AND b AND c), suggest a single composite index CREATE INDEX idx_t_abc ON t(a, b, c) rather than 3 separate single-column indexes.\n\n## Implementation notes\n- list_indexed_columns() in src/schema.rs currently returns Vec\u003cString\u003e of column names. Extend it to return a more structured type (or add a new list_indexes() method) that includes composite index info.\n- The SHOW INDEX FROM statement returns: Table, Non_unique, Key_name, Seq_in_index, Column_name, Cardinality.\n- Group by Key_name to find composite indexes; sort by Seq_in_index to get column order.\n- A WHERE clause is 'covered' by an existing index if all its equality columns appear as a prefix of the index.\n\n## Verification\n- cargo test passes\n- Create a test table with a composite index: CREATE TABLE t (a INT, b INT, c INT, INDEX idx_ab (a,b)); then run SELECT * FROM t WHERE a=1 AND b=2 — no suggestion should fire.\n- Run SELECT * FROM t WHERE a=1 AND b=2 AND c=3 — should suggest a composite index on (a,b,c) since c is unindexed, not 3 separate single-column indexes.","status":"closed","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T09:41:03.173804613-07:00","created_by":"Cecil","updated_at":"2026-02-21T10:08:42.603617982-07:00","closed_at":"2026-02-21T10:08:42.603617982-07:00","close_reason":"Closed"}
{"id":"mysql-mcp-7k7","title":"Validate max_rows \u003e 0 in config","description":"In src/query/read.rs line 77, max_rows=0 causes the LIMIT clause to never be injected (the guard is max_rows \u003e 0), silently returning uncapped result sets. Config validation in src/config/mod.rs has checks for pool size and timeouts but not for max_rows. Add: if self.pool.max_rows == 0 { bail\\!(\"max_rows must be \u003e 0\") } or define 0 as 'unlimited' and document it explicitly.","status":"closed","priority":1,"issue_type":"bug","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T03:24:34.449337688-07:00","created_by":"Cecil","updated_at":"2026-02-21T03:34:22.410907889-07:00","closed_at":"2026-02-21T03:34:22.410907889-07:00","close_reason":"Added max_rows \u003e 0 and warmup_connections \u003c= pool.size validation"}
{"id":"mysql-mcp-7uc","title":"Add max_sessions limit to prevent session-count DoS","description":"mysql_connect inserts into sessions HashMap with no cap. Any caller with ALLOW_RUNTIME_CONNECTIONS=true can create arbitrarily many sessions, each with a pool of up to 5 connections, exhausting file descriptors and memory. Add a max_sessions config field (default 50) to SecurityConfig, validated at config load, and enforced in the mysql_connect handler in server.rs before inserting the new session.","status":"closed","priority":1,"issue_type":"bug","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T03:24:39.841419519-07:00","created_by":"Cecil","updated_at":"2026-02-21T04:04:30.929464993-07:00","closed_at":"2026-02-21T04:04:30.929464993-07:00","close_reason":"max_sessions limit enforced in mysql_connect handler; config field added separately"}
{"id":"mysql-mcp-7va","title":"Implement TOML config file parsing","description":"Load config from mysql-mcp.toml (or path from env MCP_CONFIG_FILE). Use toml crate. Support all Config fields. Define sensible defaults.","status":"closed","priority":1,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:42:29.453738318-07:00","created_by":"Cecil","updated_at":"2026-02-20T05:52:06.100727431-07:00","closed_at":"2026-02-20T05:52:06.100727431-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-7va","depends_on_id":"mysql-mcp-d95","type":"blocks","created_at":"2026-02-20T05:43:57.552077786-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-82j","title":"Write README documenting config, env vars, and response fields","description":"The server has grown significantly and lacks documentation. Write a comprehensive README.md covering everything a new user needs to get started and tune the server.\n\nSections to include:\n\n1. Quick start — minimal config to connect and run\n\n2. Configuration reference — every field in mysql-mcp.toml with its env var, type, default, and description. Key fields added recently:\n   - pool.readonly_transaction (MYSQL_READONLY_TRANSACTION) — force transaction even on known-safe queries\n   - pool.performance_hints (MYSQL_PERFORMANCE_HINTS) — none/hints/auto/always\n   - pool.slow_query_threshold_ms (MYSQL_SLOW_QUERY_THRESHOLD_MS) — threshold for auto EXPLAIN\n   - pool.max_rows (MYSQL_MAX_ROWS) — result set cap\n   - pool.warmup_connections (MYSQL_POOL_WARMUP) — eager connection warmup\n   - pool.statement_cache_capacity (MYSQL_STATEMENT_CACHE_CAPACITY) — prepared statement cache size\n\n3. MCP tools — mysql_query and mysql_multi_query with full parameter and response field documentation including: rows, row_count, execution_time_ms, serialization_time_ms, capped, parse_warnings, plan, suggestions, wall_time_ms\n\n4. Performance guide — when to use readonly_transaction=false, what performance_hints modes cost, how max_rows protects against large result sets, when mysql_multi_query helps\n\n5. Security — permission config, schema-level overrides, SSL options","status":"closed","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T17:38:37.826254674-07:00","created_by":"Cecil","updated_at":"2026-02-20T17:57:37.954295185-07:00","closed_at":"2026-02-20T17:57:37.954295185-07:00","close_reason":"Wrote comprehensive README covering config, tools, response fields, performance guide, and security"}
{"id":"mysql-mcp-852","title":"Fix identifier injection in schema introspection SQL","description":"SHOW INDEX FROM and INFORMATION_SCHEMA queries in src/schema.rs build SQL via backtick-quoting and escape_sql_string(), neither of which is safe. Backtick quoting doesn't escape backticks within names; escape_sql_string() only doubles single-quotes and misses backslash escapes. Fix: use sqlx parameterized queries (bind parameters) for all internal schema SQL that touches user-supplied identifiers.","status":"closed","priority":0,"issue_type":"bug","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T03:24:18.995406688-07:00","created_by":"Cecil","updated_at":"2026-02-21T03:39:02.305070122-07:00","closed_at":"2026-02-21T03:39:02.305070122-07:00","close_reason":"Fixed identifier injection: backtick-double escaping for SHOW INDEX FROM, sqlx bind params for INFORMATION_SCHEMA queries"}
{"id":"mysql-mcp-86j","title":"Add SQL length and multi-query count caps","description":"No input validation: (1) server.rs:322 accepts arbitrarily large SQL (100MB DoS vector), (2) mysql_multi_query queries array is unbounded (10k tasks would exhaust pool). Fix: add MAX_SQL_LENGTH=1MB and MAX_QUERIES=100 guards with clear error messages.","status":"closed","priority":1,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T00:47:01.243270813-07:00","created_by":"Cecil","updated_at":"2026-02-21T00:58:42.611739496-07:00","closed_at":"2026-02-21T00:58:42.611739496-07:00","close_reason":"implemented in batch 1"}
{"id":"mysql-mcp-881","title":"Structured per-query performance logging","description":"Add structured logging of query performance data so patterns can be observed over a session. Currently there is no record of what queries ran, how long they took, or what warnings fired.\n\nWhat to log (at debug/info level via tracing):\n- SQL statement (or truncated version)\n- execution_time_ms and serialization_time_ms\n- row_count and whether result was capped\n- parse_warnings (if any)\n- plan tier (fast/slow/very_slow) and full_table_scan flag (if EXPLAIN ran)\n- suggestions (if any were generated)\n\nThis allows operators to observe patterns like: '10 of the last 20 queries were full table scans' or 'the LLM keeps hitting the same slow query'. Log at tracing::info! when slow (above slow_query_threshold_ms), tracing::debug! otherwise.\n\nAlso consider: a summary log line at the end of each mysql_multi_query call showing wall_time_ms and per-query breakdown.\n\nImplementation: src/server.rs call_tool handler, after collecting results. Uses existing tracing infrastructure (MYSQL_LOG_LEVEL / MYSQL_ENABLE_LOGGING config already exists).","status":"closed","priority":3,"issue_type":"feature","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T17:38:13.867460992-07:00","created_by":"Cecil","updated_at":"2026-02-20T18:17:36.877197554-07:00","closed_at":"2026-02-20T18:17:36.877197554-07:00","close_reason":"Added structured tracing logs for query performance at info (slow queries, execution_time_ms \u003e= slow_query_threshold_ms) and debug (normal queries) levels; logs sql (truncated to 200 chars), execution_time_ms, serialization_time_ms, row_count, capped, parse_warnings, plan_tier, full_table_scan, and suggestions for mysql_query; wall_time_ms and per-query sql/execution_time_ms/row_count for mysql_multi_query"}
{"id":"mysql-mcp-8ar","title":"Add per-query explain flag to mysql_query tool schema","description":"Add an optional explain: bool parameter to the mysql_query MCP tool so the LLM can explicitly request EXPLAIN analysis on a specific query, independent of the server-side performance_hints setting.\n\nTool schema change:\n{\n  'type': 'object',\n  'properties': {\n    'sql': { 'type': 'string', 'description': 'The SQL query to execute' },\n    'explain': { 'type': 'boolean', 'description': 'Run EXPLAIN and include execution plan analysis in the response. Useful for debugging slow queries.' }\n  },\n  'required': ['sql']\n}\n\nBehaviour:\n- explain: true forces EXPLAIN to run for this query regardless of performance_hints setting\n- explain: false (or omitted) falls back to server-side performance_hints behaviour\n- Only valid for read queries (SELECT/SHOW/EXPLAIN); ignored for writes\n\nThis lets the LLM use a workflow like:\n1. Execute a query, notice it was slow\n2. On the next call, set explain: true to get the execution plan\n3. Use plan + schema info to suggest an index\n\nNo implicit overhead on normal queries — the LLM opts in explicitly when it wants analysis.","status":"closed","priority":3,"issue_type":"feature","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T14:03:39.297267338-07:00","created_by":"Cecil","updated_at":"2026-02-20T15:47:54.352309475-07:00","closed_at":"2026-02-20T15:47:54.352309475-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-8ar","depends_on_id":"mysql-mcp-3sj","type":"blocks","created_at":"2026-02-20T14:04:06.23933313-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-8r8","title":"Cache list_indexed_columns() to avoid SHOW INDEX on every slow query","description":"## Problem\nWhen EXPLAIN detects a full-table-scan, src/server.rs:1082 calls:\n\n    let indexed_cols = introspector.list_indexed_columns(tname, db).await;\n\nThis runs SHOW INDEX FROM {table} synchronously against the DB on every slow query execution. There is no caching: every slow query touching the same table re-fetches the same index metadata. On a remote DB with 130ms RTT, this adds 130-500ms to every slow query response.\n\nlist_indexed_columns is defined in src/schema.rs and calls SHOW INDEX FROM. The SchemaIntrospector already has a TTL cache for column metadata (schema.rs:73-78 — the DashMap cache), but list_indexed_columns bypasses it.\n\n## Fix\nAdd index metadata to the SchemaIntrospector cache. Options:\n\nA) **Add a separate index cache** in SchemaIntrospector alongside the existing column cache:\n   - Add `index_cache: DashMap\u003cString, (Vec\u003cString\u003e, Instant)\u003e` to SchemaIntrospector\n   - In list_indexed_columns(): check cache first, fall back to SHOW INDEX if stale, use same TTL as column cache (cache_ttl_secs)\n   - Call invalidate_table() to also clear the index cache entry\n\nB) **Return index info from existing get_columns_for_table()** — include indexed column names in the existing CachedTableInfo struct, so one cache handles both.\n\nOption A is simpler and lower risk.\n\n## Verification\n- cargo test passes\n- Run a query that triggers a full-table-scan suggestion twice in a row: the second call should not hit the DB for SHOW INDEX (add tracing::debug to confirm, or check perf)\n- invalidate_table() still clears the index cache so DDL changes are reflected","status":"closed","priority":2,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T09:36:31.174714562-07:00","created_by":"Cecil","updated_at":"2026-02-21T10:08:42.579472296-07:00","closed_at":"2026-02-21T10:08:42.579472296-07:00","close_reason":"Closed"}
{"id":"mysql-mcp-8ym","title":"Redact credentials from debug logs in mysql_connect","description":"In server.rs, the mysql_connect handler logs 'user = %user' at tracing::debug\\! level. If debug logging is enabled in production (e.g. RUST_LOG=debug), usernames appear in logs. While passwords are not logged, usernames can be sensitive. Fix: either remove user from the debug log entirely, or log it as '\u003credacted\u003e'. Also audit other log call sites for any accidental credential exposure.","status":"closed","priority":2,"issue_type":"bug","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T03:25:09.669263867-07:00","created_by":"Cecil","updated_at":"2026-02-21T04:04:30.974581244-07:00","closed_at":"2026-02-21T04:04:30.974581244-07:00","close_reason":"Redacted user field from mysql_connect debug log"}
{"id":"mysql-mcp-99u","title":"Permission enforcement layer","description":"Given a parsed statement type + target schema, check against config: global flags (allow_insert etc.) and schema-specific overrides. Return Ok or permission error. Support multi-DB mode permission checks.","status":"closed","priority":1,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:42:47.628989595-07:00","created_by":"Cecil","updated_at":"2026-02-20T05:59:23.388930419-07:00","closed_at":"2026-02-20T05:59:23.388930419-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-99u","depends_on_id":"mysql-mcp-1gq","type":"blocks","created_at":"2026-02-20T05:43:57.669780688-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-99u","depends_on_id":"mysql-mcp-lok","type":"blocks","created_at":"2026-02-20T05:43:57.68663581-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-9e7","title":"Write README.md","description":"Comprehensive README: project description, installation (cargo install + prebuilt binaries), Claude Desktop / Claude Code MCP config examples, quick start, all config options table (env var + TOML key + default + description), feature list, multi-DB mode guide, schema permissions guide.","status":"closed","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:43:21.754774926-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:12:52.794739954-07:00","closed_at":"2026-02-20T06:12:52.794739954-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-9e7","depends_on_id":"mysql-mcp-b47","type":"blocks","created_at":"2026-02-20T05:43:58.374947839-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-9e7","depends_on_id":"mysql-mcp-19m","type":"blocks","created_at":"2026-02-20T05:43:58.390703549-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-9e7","depends_on_id":"mysql-mcp-66e","type":"blocks","created_at":"2026-02-20T05:43:58.407214726-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-9fb","title":"Add GitHub Actions release workflow (cross-compiled binaries)","description":"Create .github/workflows/release.yml. Trigger on tag push (v*). Build targets: linux-x86_64-musl (static), linux-aarch64, macos-x86_64, macos-arm64, windows-x64. Use cross or cargo-zigbuild for cross-compilation. Upload binaries as GitHub Release assets, auto-generate release notes.","status":"closed","priority":1,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:42:16.123832863-07:00","created_by":"Cecil","updated_at":"2026-02-20T05:56:33.523865728-07:00","closed_at":"2026-02-20T05:56:33.523865728-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-9fb","depends_on_id":"mysql-mcp-e89","type":"blocks","created_at":"2026-02-20T05:43:57.653428219-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-9rs","title":"MCP Server","description":"rmcp-based server with stdio + HTTP transports, mysql_query tool, table resources","status":"closed","priority":2,"issue_type":"epic","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:42:02.60584327-07:00","created_by":"Cecil","updated_at":"2026-02-20T05:46:11.751451048-07:00","closed_at":"2026-02-20T05:46:11.751451048-07:00","close_reason":"Epic grouping only"}
{"id":"mysql-mcp-ahi","title":"Unit tests: config edge cases and validation","description":"Test: socket path takes precedence over host:port, connection string overrides individual fields, ALLOW_DDL without DISABLE_READ_ONLY warns/errors appropriately, schema permission keys with unusual database names, empty MYSQL_DB triggers multi-DB mode, invalid port/timeout values produce clear errors.","status":"closed","priority":1,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:47:11.121982047-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:05:58.263651152-07:00","closed_at":"2026-02-20T06:05:58.263651152-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-ahi","depends_on_id":"mysql-mcp-lok","type":"blocks","created_at":"2026-02-20T05:47:22.687324893-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-auj","title":"Eager connection pool warm-up on server startup","description":"After the pool is created, proactively establish a configurable number of connections in the background so the first real queries don't pay the handshake penalty (~3 RTTs × 107ms ≈ 320ms per connection on remote DBs).\n\nCurrent behaviour: pool uses connect_lazy — connections are created on first use. The first N concurrent requests after startup each trigger a TCP+TLS+MySQL auth handshake, adding 300ms+ to their latency.\n\nTarget behaviour: on startup, spawn a background task that acquires and immediately releases min(pool.size, pool_warmup_connections) connections in sequence (throttled to avoid overwhelming the server). By the time the first MCP request arrives, the pool has idle ready connections.\n\nConfig addition:\n- pool.warmup_connections: u32 (default 1, 0 = disabled) — how many connections to pre-establish\n  Env var: MYSQL_POOL_WARMUP\n\nImplementation (src/main.rs or src/db.rs):\nAfter pool creation, if warmup_connections \u003e 0:\n  tokio::spawn(async move {\n    for _ in 0..warmup_connections {\n      if let Ok(conn) = pool.acquire().await {\n        drop(conn); // returns to pool as idle\n      }\n    }\n  });\n\nThe warmup runs concurrently with server startup (stdio transport setup, etc.) so it adds no latency to the startup path itself. On high-latency remote DBs (130ms RTT), warming 1 connection takes ~400ms in the background — well within the time the LLM client takes to send its first request after connecting.\n\nNote: warmup_connections should be ≤ pool.size. Document that warming all pool.size connections is safe but may briefly spike DB connection count at startup.","status":"closed","priority":2,"issue_type":"feature","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T14:13:05.207638099-07:00","created_by":"Cecil","updated_at":"2026-02-20T15:21:55.660984604-07:00","closed_at":"2026-02-20T15:21:55.660984604-07:00","close_reason":"Closed"}
{"id":"mysql-mcp-b31","title":"Reject multi-statement SQL at parse time","description":"Parser classifies by first statement only, but MySQL executes all statements. SELECT 1; DROP TABLE t is routed as read-only SELECT but the DROP still fires. Fix: reject with clear error if parse returns \u003e1 statement.","status":"closed","priority":1,"issue_type":"bug","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T00:46:53.747844223-07:00","created_by":"Cecil","updated_at":"2026-02-21T00:58:42.592041622-07:00","closed_at":"2026-02-21T00:58:42.592041622-07:00","close_reason":"implemented in batch 1"}
{"id":"mysql-mcp-b47","title":"Implement mysql_query tool","description":"Register mysql_query tool with rmcp. Input schema: {sql: string}. Route to read or write execution based on parsed statement type and permissions. Return JSON result set with row count and execution_time_ms. Generate dynamic tool description listing enabled operations, mode (single/multi-DB), and schema permissions.","status":"closed","priority":1,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:43:01.930980604-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:09:01.193271591-07:00","closed_at":"2026-02-20T06:09:01.193271591-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-b47","depends_on_id":"mysql-mcp-zho","type":"blocks","created_at":"2026-02-20T05:43:57.934679245-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-b47","depends_on_id":"mysql-mcp-2gl","type":"blocks","created_at":"2026-02-20T05:43:57.951539226-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-b47","depends_on_id":"mysql-mcp-nle","type":"blocks","created_at":"2026-02-20T05:43:57.96922202-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-b47","depends_on_id":"mysql-mcp-n0e","type":"blocks","created_at":"2026-02-20T05:43:57.986039722-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-bgk","title":"Implement mysql://tables resource (list)","description":"Register resource handler for mysql://tables. Returns list of all accessible tables with metadata: name, schema, row_count, data_size_bytes, create_time, update_time. Uses schema introspection layer.","status":"closed","priority":1,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:43:01.954484436-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:08:53.921275482-07:00","closed_at":"2026-02-20T06:08:53.921275482-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-bgk","depends_on_id":"mysql-mcp-zho","type":"blocks","created_at":"2026-02-20T05:43:58.00373542-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-bgk","depends_on_id":"mysql-mcp-x3n","type":"blocks","created_at":"2026-02-20T05:43:58.021360837-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-bo9","title":"Improve error message actionability (parse errors, permission denials)","description":"Parse errors format as 'SQL parse error: {}' losing the error chain. Permission denials don't name which permission or which database. Fix: include permission type (INSERT/UPDATE/DDL), target schema, and hint about which env var to set.","status":"closed","priority":2,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T00:47:24.220676007-07:00","created_by":"Cecil","updated_at":"2026-02-21T01:06:56.340567261-07:00","closed_at":"2026-02-21T01:06:56.340567261-07:00","close_reason":"implemented in batch 3a"}
{"id":"mysql-mcp-bxa","title":"Add mysql_multi_query tool for parallel query execution","description":"Add a second MCP tool 'mysql_multi_query' that accepts an array of SQL statements and executes them concurrently against the connection pool, returning all results together.\n\nMotivation: LLMs routinely need data from multiple tables to answer a question. Currently this requires 3 sequential tool calls at ~107ms each = 321ms minimum. With parallel execution, all 3 complete in ~107ms wall time — the pool already supports concurrent connections, the LLM just has no way to exploit this today.\n\nTool schema:\n{\n  'type': 'object',\n  'properties': {\n    'queries': {\n      'type': 'array',\n      'items': { 'type': 'string' },\n      'description': 'SQL statements to execute in parallel. All must be read-only (SELECT, SHOW, EXPLAIN).'\n    }\n  },\n  'required': ['queries']\n}\n\nResponse shape:\n{\n  'results': [\n    { 'sql': 'SELECT ...', 'rows': [...], 'row_count': 3, 'execution_time_ms': 108, 'serialization_time_ms': 1 },\n    { 'sql': 'SELECT ...', 'rows': [...], 'row_count': 1, 'execution_time_ms': 112, 'serialization_time_ms': 0 },\n  ],\n  'wall_time_ms': 114\n}\n\nImplementation:\n- Add to list_tools in server.rs alongside mysql_query\n- Parse and permission-check each statement upfront (reject if any is not read-only or permission denied)\n- Use tokio::join! or JoinSet to run execute_read_query concurrently for all statements\n- Respect pool size — if more queries than connections, some will queue (still faster than sequential tool calls)\n- Each query respects the readonly_transaction config flag independently\n- Writes (INSERT/UPDATE/DELETE) are explicitly excluded — parallel writes introduce ordering/transaction risks\n\nDesign note: keep mysql_query as the primary tool; mysql_multi_query is an optimization hint the LLM can use when it knows it needs multiple independent datasets.","status":"closed","priority":2,"issue_type":"feature","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T14:12:14.040770159-07:00","created_by":"Cecil","updated_at":"2026-02-20T15:33:23.429995097-07:00","closed_at":"2026-02-20T15:33:23.429995097-07:00","close_reason":"Closed"}
{"id":"mysql-mcp-byl","title":"Fix: explain efficiency metric can exceed 1.0 (rows_returned/rows_examined \u003e 1 is physically impossible)","description":"In query/read.rs, the explain efficiency metric is computed as:\n  efficiency = row_count / rows_examined_estimate\n\nThe comment in explain.rs says it should be 0.0-1.0 (higher is better), but the formula can produce values \u003e 1.0 when rows_examined_estimate from EXPLAIN is lower than the actual rows returned.\n\nThis happens because rows_examined_estimate comes from MySQL EXPLAIN's optimizer estimate (which is an approximation), while row_count is the actual rows returned. For info_schema queries, MySQL's EXPLAIN estimates are often lower than reality.\n\nObserved during E2E validation (mysql-mcp-dk0):\n  SELECT table_name FROM information_schema.tables WHERE table_schema='mysql'\n  returned row_count: 37, rows_examined_estimate: 28\n  efficiency = 37/28 = 1.3214 (impossible: \u003e 1.0)\n\nFix options:\n  1. Clamp efficiency to min(1.0, row_count/rows_examined_estimate)\n  2. Remove the efficiency metric from the response entirely since estimated rows are unreliable\n  3. Rename it to rows_returned_per_examined_estimate and document that it can exceed 1.0 for estimates\n\nThe metric as-is is misleading and will confuse LLM consumers interpreting the plan block.","status":"closed","priority":2,"issue_type":"bug","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T18:03:34.12519197-07:00","created_by":"Cecil","updated_at":"2026-02-20T18:10:16.286338767-07:00","closed_at":"2026-02-20T18:10:16.286338767-07:00","close_reason":"Fixed: efficiency clamped to min(1.0, ratio)"}
{"id":"mysql-mcp-cpd","title":"Integration tests: HTTP remote transport","description":"Test IS_REMOTE_MCP mode with axum HTTP server. Cases: valid Bearer token accepted, missing/invalid token returns 401, mysql_query tool works over HTTP, table resources accessible, health/startup behavior. Spawn server on random port, test with HTTP client.","status":"closed","priority":2,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:47:11.048841883-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:12:17.066687835-07:00","closed_at":"2026-02-20T06:12:17.066687835-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-cpd","depends_on_id":"mysql-mcp-19m","type":"blocks","created_at":"2026-02-20T05:47:22.563408619-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-cv1","title":"Document readonly_transaction and performance_hints in example TOML","description":"## Problem\nSeveral config options are implemented and work correctly but are not documented in mysql-mcp.example.toml, leaving users to discover them only by reading README.md or the source:\n\n- readonly_transaction (PoolConfig) — wraps SELECT in a read-only transaction; default false. The example TOML at line 56 mentions 'disable_read_only_transactions' (an inverted name) which is confusing and likely a stale comment.\n- performance_hints — controls EXPLAIN auto-triggering: 'none' | 'auto' | 'always'; only appears in README but not the example config\n- slow_query_threshold_ms — only meaningful when performance_hints='auto'; not in example TOML\n- max_rows — important safety limit; not in example TOML\n- warmup_connections — useful for reducing first-query latency; not in example TOML\n- SCHEMA_\u003cNAME\u003e_PERMISSIONS env var pattern — per-database write overrides; mentioned nowhere except source code\n\n## Fix\nUpdate mysql-mcp.example.toml to include all documented config options with:\n1. The correct field name (fix readonly_transaction / disable_read_only_transactions confusion)\n2. The default value, commented out\n3. A 1-2 line comment explaining what it does and when to change it\n4. For performance_hints: list the valid values ('none', 'auto', 'always') and their behavior\n\nAlso add a section in README.md documenting the SCHEMA_\u003cNAME\u003e_PERMISSIONS env var pattern with an example.\n\n## Verification\n- mysql-mcp.example.toml contains entries for all config fields defined in src/config/mod.rs\n- No field name discrepancies between the TOML example and the Rust struct field names\n- cargo test passes (this is a docs-only change)","status":"closed","priority":4,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T09:41:15.780854445-07:00","created_by":"Cecil","updated_at":"2026-02-21T10:00:09.004596418-07:00","closed_at":"2026-02-21T10:00:09.004596418-07:00","close_reason":"Completed in Batch 1: remote.rs deleted, cli_parser.rs deleted, env vars renamed to MYSQL_* prefix, example TOML documented"}
{"id":"mysql-mcp-d03","title":"Unit tests: MySQL CLI connection string parsing","description":"Test parsing of mysql CLI format strings: short flags (-h, -P, -u, -p), long flags (--host, --port, --user, --password), database as positional arg, mixed short/long, password with special characters, missing optional fields, precedence over individual env vars.","status":"closed","priority":1,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:47:11.143807961-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:05:58.24131513-07:00","closed_at":"2026-02-20T06:05:58.24131513-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-d03","depends_on_id":"mysql-mcp-lok","type":"blocks","created_at":"2026-02-20T05:47:22.70622523-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-d8j","title":"Configuration System","description":"TOML config file + env var support with merge/precedence logic","status":"closed","priority":2,"issue_type":"epic","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:42:02.568771923-07:00","created_by":"Cecil","updated_at":"2026-02-20T05:46:11.710232933-07:00","closed_at":"2026-02-20T05:46:11.710232933-07:00","close_reason":"Epic grouping only"}
{"id":"mysql-mcp-d95","title":"Define config structs and types","description":"Define Config struct covering all settings: connection (host, port, socket, user, pass, db, connection_string), pool (size, query_timeout, connect_timeout, queue_limit, cache_ttl), security (allow_insert, allow_update, allow_delete, allow_ddl, disable_read_only_txns, ssl, schema_permissions), remote (enabled, secret_key, port), monitoring (logging, log_level, metrics), timezone. Use serde Deserialize.","status":"closed","priority":0,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:42:29.428112406-07:00","created_by":"Cecil","updated_at":"2026-02-20T05:49:59.174992824-07:00","closed_at":"2026-02-20T05:49:59.174992824-07:00","close_reason":"Closed"}
{"id":"mysql-mcp-dk0","title":"End-to-end validation with real LLM session","description":"Validate the full system by running a Claude session with mysql-mcp connected to a real database and observing actual LLM behavior.\n\nThings to test and observe:\n\n1. Does the LLM reach for mysql_multi_query when it needs data from multiple tables? Or does it always use sequential mysql_query calls?\n\n2. When parse_warnings fire (SELECT *, no WHERE, no LIMIT), does the LLM acknowledge them and adjust its approach?\n\n3. When performance_hints=auto and a slow query triggers EXPLAIN, does the LLM interpret the plan block correctly and propose the right index?\n\n4. When suggestions contains a CREATE INDEX statement, does the LLM propose it to the user or (if DDL is enabled) execute it?\n\n5. Does the capped: true response cause the LLM to add a more specific filter or use pagination?\n\n6. Does the explain: true flag get used appropriately for debugging slow queries?\n\nRun against the remote DB (10.96.84.170) with MYSQL_PERFORMANCE_HINTS=auto and a database that has real tables (not just mcp_test). Document observed LLM behavior and any gaps between expected and actual behavior. File follow-up issues for anything that doesn't work as intended.","status":"closed","priority":2,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T17:38:29.092556604-07:00","created_by":"Cecil","updated_at":"2026-02-20T18:03:58.880160587-07:00","closed_at":"2026-02-20T18:03:58.880160587-07:00","close_reason":"Validated E2E via scripted JSON-RPC 2.0 messaging against real DB (10.96.84.170). Binary builds cleanly. All key behaviors tested:\n\n1. initialize/tools/list/tools/call handshake: WORKS. Both mysql_query and mysql_multi_query appear in tools/list with correct schemas including explain flag, sql, and queries parameters.\n\n2. mysql_query basic SELECT: WORKS. SELECT 1 AS val returns {rows:[{val:1}], row_count:1, execution_time_ms:501}.\n\n3. mysql_multi_query parallel execution: WORKS. Two queries run in parallel, results reordered to match input order, wall_time_ms included.\n\n4. parse_warnings with SELECT * / no WHERE / no LIMIT: WORKS with MYSQL_PERFORMANCE_HINTS!=none. Three warnings fired correctly.\n\n5. explain:true flag: WORKS. Overrides performance_hints=none and attaches plan block with full_table_scan, index_used, rows_examined_estimate, tier, efficiency.\n\n6. MYSQL_PERFORMANCE_HINTS=always server-side explain: WORKS. Plan block present on all SELECT queries.\n\n7. max_rows cap (MYSQL_MAX_ROWS=5): WORKS with correct row truncation for SELECT. BROKEN for SHOW (see mysql-mcp-5nk).\n\n8. Permission enforcement: WORKS. INSERT blocked with 'Permission denied: INSERT operations are not allowed.' Read queries allowed.\n\n9. resources/list: WORKS. Returns 12 tables in mcp_test DB with correct mysql:// URIs.\n\n10. resources/read (table schema): WORKS. Returns column list with name, data_type, is_nullable, column_key, extra.\n\n11. resources/templates/list: WORKS. Returns mysql://tables/{schema}/{table} template.\n\nBUGS FILED:\n- mysql-mcp-5nk (P1): SHOW TABLES/DATABASES broken with default max_rows=1000 - LIMIT appended to SHOW statements causing MySQL syntax error 1064\n- mysql-mcp-7ah (P2): capped:true set whenever LIMIT is appended, even when row_count \u003c\u003c max_rows (false positive misleads LLM consumers)\n- mysql-mcp-byl (P2): explain efficiency metric can exceed 1.0 due to EXPLAIN estimated rows being lower than actual rows returned"}
{"id":"mysql-mcp-dwo","title":"Phase 3: Schema-aware index suggestions from EXPLAIN results","description":"Cross-reference EXPLAIN results with the existing schema cache to generate specific, actionable suggestions — the highest-value output for LLM-driven workflows.\n\nCore logic:\nWhen EXPLAIN reports key: null (no index used) on a table scan, look up the WHERE clause columns from the AST and check them against the schema cache's index list for that table. If a WHERE column has no index, emit a concrete suggestion.\n\nExample suggestion output:\n'Column email in WHERE clause on table users has no index. Existing indexes: PRIMARY (id). Consider: CREATE INDEX idx_users_email ON users(email);'\n\nThe suggestions block in the response:\n{\n  'performance': {\n    ...\n    'suggestions': [\n      'Column email in WHERE clause has no index. Consider: CREATE INDEX idx_users_email ON users(email);'\n    ]\n  }\n}\n\nImplementation:\n- New function generate_suggestions(explain_result, parsed_stmt, schema_cache) in src/query/analysis.rs\n- Needs access to both the EXPLAIN output (from Phase 2) and the SchemaIntrospector cache\n- McpServer passes the introspector reference to the analysis layer\n- If DDL is enabled in config, the suggestion could note it's executable directly\n\nThe suggestions should be specific enough that the LLM can immediately propose them to the user or, if DDL is enabled, execute them. Generic 'add an index' advice is not sufficient — the suggestion must name the exact table, column, and provide a ready-to-run CREATE INDEX statement.","status":"closed","priority":3,"issue_type":"feature","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T14:03:23.622179244-07:00","created_by":"Cecil","updated_at":"2026-02-20T15:57:49.378936457-07:00","closed_at":"2026-02-20T15:57:49.378936457-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-dwo","depends_on_id":"mysql-mcp-n9c","type":"blocks","created_at":"2026-02-20T14:04:06.213114567-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-e89","title":"Initialize Cargo project and workspace layout","description":"Create Cargo.toml, src/main.rs skeleton, .gitignore, and top-level workspace structure. Crates: mysql-mcp (bin). Add dependencies: rmcp, sqlx (mysql+runtime-tokio), tokio, serde, toml, dotenv, anyhow, tracing, tracing-subscriber.","status":"closed","priority":0,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:42:16.052618881-07:00","created_by":"Cecil","updated_at":"2026-02-20T05:49:59.117957395-07:00","closed_at":"2026-02-20T05:49:59.117957395-07:00","close_reason":"Closed"}
{"id":"mysql-mcp-ej1","title":"Remove or document CLI string parser (cli_parser.rs)","description":"## Problem\nsrc/config/cli_parser.rs is ~261 lines implementing a parser for MySQL CLI-style connection strings like:\n  -hlocalhost, -h localhost, --host=localhost, mysql://user:pass@host/db, etc.\n\nThis is used in src/config/merge.rs:29-50 to parse the MYSQL_CONNECTION_STRING env var (or 'connection_string' TOML field) when it looks like flag-style args rather than a URL.\n\n## Investigation\n1. Is MYSQL_CONNECTION_STRING documented anywhere in README.md or mysql-mcp.example.toml?\n2. Are there any users likely to use this? The README shows env var examples (MYSQL_HOST, MYSQL_USER, etc.) — the connection string approach appears to be an undocumented alternative.\n3. Run: cargo test cli_parser to see how many tests exist for this feature.\n\n## Options\nA) **Remove** cli_parser.rs entirely if MYSQL_CONNECTION_STRING is undocumented and unlikely to be used. Also remove the merge.rs:29-50 branch that calls it. Users who need connection string support can use individual env vars.\nB) **Document** it in README.md and mysql-mcp.example.toml if there's a real use case (e.g., Docker deployments where a single DATABASE_URL is provided).\nC) **Simplify** to URL-only parsing (remove the -h/-u flag-style parsing, keep only mysql:// URL parsing which is a well-understood format).\n\nThe 261 lines + tests represent significant maintenance burden for an undocumented feature.\n\n## Verification\n- cargo test passes after any changes\n- If removed: grep for 'cli_parser' and 'connection_string' in src/ confirms no dangling references\n- README.md is updated to reflect what connection methods are supported","status":"closed","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T09:40:32.914672188-07:00","created_by":"Cecil","updated_at":"2026-02-21T10:00:08.970207714-07:00","closed_at":"2026-02-21T10:00:08.970207714-07:00","close_reason":"Completed in Batch 1: remote.rs deleted, cli_parser.rs deleted, env vars renamed to MYSQL_* prefix, example TOML documented"}
{"id":"mysql-mcp-fuq","title":"Add summary block to mysql_multi_query response","description":"No way for LLM to identify which of N parallel queries was slow without walking entire array. Fix: add summary: { total_queries, slowest_query_index, slowest_execution_time_ms, queries_with_full_scans } to response.","status":"closed","priority":2,"issue_type":"feature","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T00:47:17.624512512-07:00","created_by":"Cecil","updated_at":"2026-02-21T01:06:56.303337222-07:00","closed_at":"2026-02-21T01:06:56.303337222-07:00","close_reason":"implemented in batch 3a"}
{"id":"mysql-mcp-g9r","title":"Extract tool schemas out of list_tools() into constants","description":"## Problem\nsrc/server.rs:180-375 is a 195-line list_tools() function that consists almost entirely of inlined JSON schema definitions for 8 tools. Each schema is defined as a local variable, used once, and discarded. The function is hard to read because the business logic (what tools exist) is buried in 18-line JSON blobs.\n\nAdditionally, the 'session' parameter description is copy-pasted identically into 6 of the 8 tools:\n'Named session to route this query to (omit for default connection)'\n(or similar wording) — this is repeated boilerplate.\n\n## Fix\nExtract each tool's schema definition to a module-level fn or const. Suggested approach:\n\n    fn query_schema() -\u003e Arc\u003crmcp::model::JsonObject\u003e {\n        Arc::new(rmcp::model::object(json!({...})))\n    }\n\n    fn multi_query_schema() -\u003e Arc\u003crmcp::model::JsonObject\u003e { ... }\n    // etc.\n\nOr use lazy_static / once_cell for true constants if the Arc\u003c...\u003e type allows it.\n\nThen list_tools() becomes:\n\n    Ok(ListToolsResult {\n        tools: vec![\n            Tool::new('mysql_query', QUERY_DESCRIPTION, query_schema()),\n            Tool::new('mysql_multi_query', MULTI_QUERY_DESCRIPTION, multi_query_schema()),\n            // ...\n        ],\n        ...\n    })\n\nThis reduces list_tools() from ~195 lines to ~20 lines and makes each schema independently findable.\n\nAlso extract the tool description strings to named constants so they don't pollute the function body.\n\nConsider defining a SESSION_PARAM_SCHEMA constant:\n    const SESSION_PARAM: \u0026str = r#'\"session\": { \"type\": \"string\", \"description\": \"Named session to use (omit for default connection)\" }'#;\nand reuse it via json! macro interpolation or serde_json::Value merging.\n\n## Verification\n- cargo test passes 163/163\n- list_tools() function body is \u003c 30 lines\n- cargo clippy -- -D warnings passes","status":"closed","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T09:39:07.836519101-07:00","created_by":"Cecil","updated_at":"2026-02-21T10:09:47.407969316-07:00","closed_at":"2026-02-21T10:09:47.407969316-07:00","close_reason":"Closed"}
{"id":"mysql-mcp-gbc","title":"Add mysql_server_info tool (version, current db, user)","description":"LLMs cannot check current database, MySQL version, or user privileges. Hard to diagnose 'table not found' errors. Fix: add mysql_server_info tool returning version, current_database, user, accessible_features.","status":"closed","priority":3,"issue_type":"feature","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T00:47:44.551108327-07:00","created_by":"Cecil","updated_at":"2026-02-21T01:19:22.375199889-07:00","closed_at":"2026-02-21T01:19:22.375199889-07:00","close_reason":"implemented in batch 3b"}
{"id":"mysql-mcp-h49","title":"sqlx connection pool setup","description":"Initialize MySqlPoolOptions with config values (pool size, timeouts, keep-alive). Support both TCP (host:port) and Unix socket connections. Lazy init — create pool on first query. Implement graceful shutdown (close pool on SIGINT/SIGTERM).","status":"closed","priority":0,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:42:47.590403356-07:00","created_by":"Cecil","updated_at":"2026-02-20T05:59:23.365169874-07:00","closed_at":"2026-02-20T05:59:23.365169874-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-h49","depends_on_id":"mysql-mcp-e89","type":"blocks","created_at":"2026-02-20T05:43:57.851663379-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-h49","depends_on_id":"mysql-mcp-lok","type":"blocks","created_at":"2026-02-20T05:43:57.867593606-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-h69","title":"Parse-time safety warnings for write queries","description":"Extend parse-time analysis to write queries (INSERT/UPDATE/DELETE). These warnings are zero-cost (AST-only) and protect against dangerous patterns.\n\nPatterns to detect:\n- UPDATE with no WHERE clause — affects every row in the table\n- DELETE with no WHERE clause — deletes every row in the table  \n- INSERT ... SELECT with no WHERE on the SELECT subquery (unbounded source)\n- UPDATE/DELETE with LIMIT missing when WHERE matches many rows (lower priority)\n\nResponse addition for write queries:\n{\n  'rows_affected': 5,\n  'execution_time_ms': 274,\n  'parse_warnings': ['DELETE has no WHERE clause — this will delete all rows in the table']\n}\n\nNote: the current security layer already blocks writes when allow_delete/allow_update are false. These warnings are for when writes ARE permitted — they warn the LLM (and user) about dangerous patterns even when the operation is authorized.\n\nEXPLAIN for writes: MySQL 8.0+ supports EXPLAIN on UPDATE/DELETE. This is lower priority than read EXPLAIN but could be added as a follow-up: when performance_hints is 'auto' or 'always', run EXPLAIN on UPDATE/DELETE to get rows_examined_estimate, which is especially useful for large-table updates.","status":"closed","priority":3,"issue_type":"feature","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T14:03:54.973044586-07:00","created_by":"Cecil","updated_at":"2026-02-20T15:54:07.931958903-07:00","closed_at":"2026-02-20T15:54:07.931958903-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-h69","depends_on_id":"mysql-mcp-3sj","type":"blocks","created_at":"2026-02-20T14:04:06.266529762-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-h69","depends_on_id":"mysql-mcp-3rz","type":"blocks","created_at":"2026-02-20T14:04:06.295862606-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-i02","title":"Improve mysql_connect tool description and parameter docs","description":"The mysql_connect tool description says 'Create a named database session to an additional MySQL server' but doesn't explain when an LLM should use it vs the default session. Improve: (1) enumerate use cases (different host, different credentials, read replica, different database on same host); (2) clarify that 'default' is a reserved session name; (3) document that ssl=false is the default and what verification is used when ssl=true with/without ssl_ca; (4) clarify the 10-minute idle timeout resets on each query.","status":"closed","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T03:25:44.502022508-07:00","created_by":"Cecil","updated_at":"2026-02-21T04:04:31.142487204-07:00","closed_at":"2026-02-21T04:04:31.142487204-07:00","close_reason":"mysql_connect description and parameter docs expanded with use cases and constraints"}
{"id":"mysql-mcp-isk","title":"Wire up queue_limit to MySqlPoolOptions","description":"PoolConfig::queue_limit (default 100) is defined, TOML/env-configurable, and shown in config validation, but is never passed to MySqlPoolOptions in src/db.rs build_pool(). The pool has no protection against unbounded queue growth under saturation. Either call .max_connections() with a semaphore approach or remove the dead config field and document the omission.","status":"closed","priority":0,"issue_type":"bug","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T03:24:24.071096356-07:00","created_by":"Cecil","updated_at":"2026-02-21T03:32:14.930654184-07:00","closed_at":"2026-02-21T03:32:14.930654184-07:00","close_reason":"Removed dead queue_limit config field; sqlx has no queue_limit API, acquire_timeout serves as the backpressure mechanism"}
{"id":"mysql-mcp-jci","title":"Integration tests: write operations","description":"Requires MySQL. Test INSERT, UPDATE, DELETE with proper flag gating. Test rollback on error. Test DDL operations (CREATE TABLE, ALTER, DROP). Test that disabled operations return permission errors.","status":"closed","priority":2,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:43:21.668287147-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:09:59.447767603-07:00","closed_at":"2026-02-20T06:09:59.447767603-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-jci","depends_on_id":"mysql-mcp-nle","type":"blocks","created_at":"2026-02-20T05:43:58.194101943-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-jci","depends_on_id":"mysql-mcp-n0e","type":"blocks","created_at":"2026-02-20T05:43:58.210770815-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-kps","title":"Share SchemaIntrospector across sessions to same host","description":"Each mysql_connect call creates a new SchemaIntrospector with an independent cache, even if two sessions point to the same host:port:database. This doubles schema cache memory and network load. Fix: maintain a shared HashMap\u003c(host, port, database), Arc\u003cSchemaIntrospector\u003e\u003e on McpServer. When a new session connects, look up an existing introspector for that (host, port, db) tuple before creating a new one.","status":"closed","priority":2,"issue_type":"feature","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T03:24:56.298266196-07:00","created_by":"Cecil","updated_at":"2026-02-21T04:08:59.475246466-07:00","closed_at":"2026-02-21T04:08:59.475246466-07:00","close_reason":"SchemaIntrospector now shared per (host, port, database) via introspectors registry; mysql_connect reuses existing introspector when reconnecting to same host"}
{"id":"mysql-mcp-lok","title":"Implement config merge: TOML base, env var overrides","description":"Load TOML config first as base, then apply env vars on top. Env vars take precedence. Also support MySQL CLI connection string parsing (mysql -hHOST -PPORT ...). Write unit tests for merge precedence.","status":"closed","priority":2,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:42:29.501583111-07:00","created_by":"Cecil","updated_at":"2026-02-20T05:59:23.326874057-07:00","closed_at":"2026-02-20T05:59:23.326874057-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-lok","depends_on_id":"mysql-mcp-7va","type":"blocks","created_at":"2026-02-20T05:43:57.589683075-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-lok","depends_on_id":"mysql-mcp-quo","type":"blocks","created_at":"2026-02-20T05:43:57.605563528-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-mwc","title":"Expand mysql_server_info with SQL mode, charset, timezone","description":"mysql_server_info currently returns version, current_user, current_database, and accessible_features. Missing context that LLMs need: sql_mode (affects strict mode, date handling), character_set and collation (affects string comparisons and encoding), time_zone (critical for date/time queries), read_only flag (replica detection). Add these via a single SELECT @@sql_mode, @@character_set_connection, @@collation_connection, @@time_zone, @@read_only query.","status":"closed","priority":2,"issue_type":"feature","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T03:25:03.046689454-07:00","created_by":"Cecil","updated_at":"2026-02-21T04:04:31.102468813-07:00","closed_at":"2026-02-21T04:04:31.102468813-07:00","close_reason":"mysql_server_info now returns sql_mode, character_set, collation, time_zone, read_only"}
{"id":"mysql-mcp-n0e","title":"DDL operation support","description":"Execute CREATE/ALTER/DROP/TRUNCATE statements. Require ALLOW_DDL_OPERATION=true. Wrap in transaction where possible. Disable read-only transaction mode for DDL (MySQL limitation). Return success/error status.","status":"closed","priority":2,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:42:47.684500947-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:08:57.66364834-07:00","closed_at":"2026-02-20T06:08:57.66364834-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-n0e","depends_on_id":"mysql-mcp-nle","type":"blocks","created_at":"2026-02-20T05:43:57.767691109-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-n6p","title":"Write example mysql-mcp.toml config file","description":"Fully documented example config file with all options, comments explaining each field, example schema-specific permissions. Include in repo as mysql-mcp.example.toml.","status":"closed","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:43:21.776468061-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:05:58.309372203-07:00","closed_at":"2026-02-20T06:05:58.309372203-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-n6p","depends_on_id":"mysql-mcp-lok","type":"blocks","created_at":"2026-02-20T05:43:58.426889756-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-n9c","title":"Phase 2: EXPLAIN FORMAT=JSON integration and auto mode","description":"Run EXPLAIN FORMAT=JSON to get structured execution plan data and include it in the response performance block. Activated when performance_hints is 'auto' or 'always'.\n\nWhen to run EXPLAIN:\n- 'always': run EXPLAIN on every SELECT (parallel with query execution for minimum latency impact)\n- 'auto': run EXPLAIN sequentially after execution when execution_time_ms \u003e slow_query_threshold_ms OR a parse_warning fired\n\nParallel execution strategy for 'always' mode:\nFire EXPLAIN FORMAT=JSON \u003csql\u003e on a second connection simultaneously with the actual query. Both return in ~1 RTT. Cost is a connection, not latency.\n\nFields to extract from EXPLAIN JSON output:\n- full_table_scan: bool (access_type == 'ALL')\n- index_used: Option\u003cString\u003e (key field, null if no index)\n- possible_indexes: Vec\u003cString\u003e\n- rows_examined_estimate: u64 (rows field from EXPLAIN)\n- filtered_pct: f64 (filtered field)\n- efficiency: f64 (rows_returned / rows_examined_estimate — closer to 1.0 is better)\n- extra_flags: Vec\u003cString\u003e ('Using filesort', 'Using temporary', 'Using where', 'Using index')\n\nResponse shape added to QueryResult and MCP JSON:\n{\n  'performance': {\n    'tier': 'fast' | 'slow' | 'very_slow',\n    'parse_warnings': [...],\n    'plan': {\n      'full_table_scan': true,\n      'index_used': null,\n      'rows_examined_estimate': 50000,\n      'efficiency': 0.00002,\n      'warnings': ['Using filesort']\n    }\n  }\n}\n\nImplementation location: src/query/analysis.rs (new module) or src/query/explain.rs.\nThe plan block is only present when EXPLAIN actually ran.","status":"closed","priority":2,"issue_type":"feature","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T14:03:05.313494066-07:00","created_by":"Cecil","updated_at":"2026-02-20T15:54:07.959113295-07:00","closed_at":"2026-02-20T15:54:07.959113295-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-n9c","depends_on_id":"mysql-mcp-3sj","type":"blocks","created_at":"2026-02-20T14:04:06.15547293-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-n9c","depends_on_id":"mysql-mcp-3rz","type":"blocks","created_at":"2026-02-20T14:04:06.184945215-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-nle","title":"Write query execution with transaction safety","description":"Execute INSERT/UPDATE/DELETE inside explicit transactions with commit on success, rollback on error. Return affected rows and timing. Support MYSQL_DISABLE_READ_ONLY_TRANSACTIONS for DDL.","status":"closed","priority":1,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:42:47.66572353-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:05:07.166752317-07:00","closed_at":"2026-02-20T06:05:07.166752317-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-nle","depends_on_id":"mysql-mcp-h49","type":"blocks","created_at":"2026-02-20T05:43:57.734390474-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-nle","depends_on_id":"mysql-mcp-99u","type":"blocks","created_at":"2026-02-20T05:43:57.751030492-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-nuo","title":"Configurable max_rows cap on result sets","description":"Add a max_rows config option that caps the number of rows returned by any SELECT query. If the query has no LIMIT clause and max_rows \u003e 0, automatically append LIMIT {max_rows} before execution. If the query already has a LIMIT that exceeds max_rows, either reject or silently lower it.\n\nMotivation:\n- Unbounded SELECTs against large tables can return 100k+ rows the LLM cannot usefully process (context window limits)\n- Serialization cost scales linearly: 1000 rows × 20 cols = 330ms DB + 17ms serialization on remote DB; 100k rows would be ~33s DB + ~1.7s serialization\n- LLMs rarely need more than a few hundred rows to answer a question; if they do, pagination is the right pattern\n- Complements the parse-time 'no LIMIT' warning (mysql-mcp-3rz) — the warning flags the pattern, max_rows enforces safety\n\nConfig:\n- pool.max_rows: u32 (default 1000, 0 = unlimited)\n  Env var: MYSQL_MAX_ROWS\n  TOML: [pool] max_rows = 1000\n\nBehaviour:\n- If max_rows = 0: no cap, current behaviour unchanged\n- If query has no LIMIT and max_rows \u003e 0: rewrite SQL to append LIMIT {max_rows}\n- If query has LIMIT N where N \u003e max_rows: rewrite to LIMIT {max_rows} (protect against explicit large limits)\n- If query has LIMIT N where N \u003c= max_rows: leave as-is\n- Include a 'capped': true field in the response when the limit was applied, so the LLM knows results are truncated\n\nResponse addition when capped:\n{ 'rows': [...], 'row_count': 1000, 'capped': true, 'cap_limit': 1000, 'execution_time_ms': 330 }\n\nSQL rewriting: use the existing sqlparser AST or simple regex on the final SQL string. The AST approach is safer (handles subqueries, CTEs). The parse-time warning infrastructure (mysql-mcp-3rz) is a natural dependency since both operate on the parsed statement.","status":"closed","priority":2,"issue_type":"feature","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T14:13:32.740538074-07:00","created_by":"Cecil","updated_at":"2026-02-20T15:27:21.891814793-07:00","closed_at":"2026-02-20T15:27:21.891814793-07:00","close_reason":"Closed"}
{"id":"mysql-mcp-p0y","title":"Simplify 3-layer config merge system","description":"## Problem\nThe config system uses a 3-layer architecture that adds complexity and boilerplate:\n\n1. Default Config struct with defaults (src/config/mod.rs:125-178)\n2. Optional TOML file (mysql-mcp.toml or MCP_CONFIG_FILE) deserialized to Config\n3. EnvConfig struct (src/config/env_config.rs:1-102) — a parallel struct with ~30 Option\u003cT\u003e fields\n4. EnvConfig::apply_to() (env_config.rs:145-186) — a 42-line method manually applying each field to Config\n\nThis means every config field is defined TWICE: once in Config (with a default) and once in EnvConfig (as Option\u003cT\u003e). Adding a new config field requires touching 4 files: mod.rs, env_config.rs (two places), merge.rs, and the TOML example.\n\n## Root cause\nEnvConfig exists to allow env vars to override TOML values while preserving TOML values that weren't set by env vars. This is the 'layered config' pattern.\n\n## Simpler alternatives\nA) **Use the figment crate** (already a common Rust config pattern): Figment handles layered config (defaults → TOML → env vars → CLI args) with one clean definition and no manual apply_to(). Significant refactor but eliminates ~200 lines of boilerplate.\n\nB) **Load env vars directly into Config fields** without the intermediate EnvConfig struct. Read env vars in a Config::from_env() method that applies to a mutable Config in place. This eliminates the EnvConfig struct entirely but requires more careful ordering.\n\nC) **Keep current structure** but reduce boilerplate by using a macro to generate the apply_to() body automatically from field annotations.\n\n## Scope note\nThis is a significant refactor — investigate and prototype before committing to an approach. The existing cargo test suite (163 tests, including src/config/tests.rs) should be the verification target.\n\n## Verification  \n- cargo test passes 163/163\n- All existing env var behavior is preserved (check src/config/tests.rs for the full list of tested env vars)\n- Adding a new config field requires touching fewer files than today (ideally 1-2 instead of 4)","status":"open","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T09:40:48.191206272-07:00","created_by":"Cecil","updated_at":"2026-02-21T09:40:48.191206272-07:00"}
{"id":"mysql-mcp-p94","title":"Review and harden remote server mode","description":"RemoteConfig exists in the config (enabled, secret_key, port) but the remote HTTP transport mode has not been reviewed since the performance and feature work done this session. Changes that may affect remote mode:\n\n- readonly_transaction is now statement-type-aware (default false) — verify this works correctly over HTTP transport\n- mysql_multi_query is a new tool — verify it is accessible via remote mode\n- parse_warnings, plan, suggestions, capped fields are new response fields — verify they serialize correctly over HTTP\n- Pool warmup spawns a background task — verify this doesn't cause issues with remote server lifecycle\n- The remote mode latency profile is different: HTTP adds its own RTT on top of the DB RTT, making the 1-RTT vs 4-RTT transaction savings even more valuable\n\nReview src/remote.rs (or wherever remote transport is implemented), run the server in remote mode, and verify the new tools and response fields work correctly. Update any remote-specific documentation.","status":"closed","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T17:38:20.318451789-07:00","created_by":"Cecil","updated_at":"2026-02-20T18:13:50.874088313-07:00","closed_at":"2026-02-20T18:13:50.874088313-07:00","close_reason":"Reviewed remote.rs: handle_mcp is a documented stub returning -32601 (not yet wired to McpServer); auth middleware had two bugs: (1) secret_key=None silently set token to empty string, accepting any 'Bearer ' request — fixed by warning+rejecting with 500 on empty key; (2) auth failures returned bare 401 with no body — fixed with JSON-RPC error bodies. Both mysql_query and mysql_multi_query, all new response fields, pool warmup, and readonly_transaction are transport-agnostic and unaffected. No WebSocket surface exists. Added test for empty-secret guard. 146 tests pass."}
{"id":"mysql-mcp-qba","title":"Remove or use statement_cache_capacity config field","description":"PoolConfig::statement_cache_capacity (default 100) is configured and applied to the sqlx pool via .statement_cache_capacity(), but the server never uses sqlx prepared statements — all queries go through sqlx::query() with raw SQL strings. The cache has no effect. Options: (1) start using prepared statements for repeated internal queries like EXPLAIN FORMAT=JSON and INFORMATION_SCHEMA lookups, gaining ~1 RTT amortized; or (2) remove the config field and hardcode 0 to save memory.","status":"closed","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T03:25:20.238932038-07:00","created_by":"Cecil","updated_at":"2026-02-21T03:34:22.491445967-07:00","closed_at":"2026-02-21T03:34:22.491445967-07:00","close_reason":"Removed statement_cache_capacity from user config; hardcoded to 100 in db.rs"}
{"id":"mysql-mcp-quo","title":"Implement env var config parsing","description":"Load config from env vars matching the TS original: MYSQL_HOST, MYSQL_PORT, MYSQL_SOCKET_PATH, MYSQL_USER, MYSQL_PASS, MYSQL_DB, MYSQL_CONNECTION_STRING, MYSQL_POOL_SIZE, MYSQL_QUERY_TIMEOUT, MYSQL_CONNECT_TIMEOUT, MYSQL_QUEUE_LIMIT, MYSQL_CACHE_TTL, ALLOW_INSERT_OPERATION, ALLOW_UPDATE_OPERATION, ALLOW_DELETE_OPERATION, ALLOW_DDL_OPERATION, MYSQL_DISABLE_READ_ONLY_TRANSACTIONS, MYSQL_SSL, IS_REMOTE_MCP, REMOTE_SECRET_KEY, PORT, MYSQL_ENABLE_LOGGING, MYSQL_LOG_LEVEL, MYSQL_METRICS_ENABLED, MYSQL_TIMEZONE, MYSQL_DATE_STRINGS, SCHEMA_*_PERMISSIONS (dynamic).","status":"closed","priority":1,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:42:29.476974287-07:00","created_by":"Cecil","updated_at":"2026-02-20T05:52:06.124905917-07:00","closed_at":"2026-02-20T05:52:06.124905917-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-quo","depends_on_id":"mysql-mcp-d95","type":"blocks","created_at":"2026-02-20T05:43:57.572071664-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-rm3","title":"Add E2E test coverage for error paths","description":"e2e_tests.rs only covers happy path (initialize handshake, list tools). Missing: malformed JSON-RPC, unauthorized requests, missing required params, query error propagation. Fix: add test cases for each error path.","status":"closed","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T00:47:40.531248313-07:00","created_by":"Cecil","updated_at":"2026-02-21T01:26:43.946149956-07:00","closed_at":"2026-02-21T01:26:43.946149956-07:00","close_reason":"implemented in final batch"}
{"id":"mysql-mcp-srl","title":"Block SSRF in mysql_connect (private IP ranges)","description":"mysql_connect accepts arbitrary host+port with no validation. An attacker with ALLOW_RUNTIME_CONNECTIONS=true can probe internal services: 127.0.0.1:6379 (Redis), 169.254.169.254 (cloud metadata), internal subnets. Add host validation: block loopback (127.0.0.0/8), link-local (169.254.0.0/16), private ranges (10/8, 172.16/12, 192.168/16) unless an explicit allow_hosts list is configured. Consider a MYSQL_ALLOWED_HOSTS env var.","status":"closed","priority":1,"issue_type":"bug","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T03:24:43.625810845-07:00","created_by":"Cecil","updated_at":"2026-02-21T04:04:30.863167813-07:00","closed_at":"2026-02-21T04:04:30.863167813-07:00","close_reason":"Added is_private_host() blocking loopback/private/link-local IPs in mysql_connect"}
{"id":"mysql-mcp-syv","title":"Always emit parse_warnings field (as [] when empty)","description":"parse_warnings is omitted from response when empty. Clients can't rely on it always being present. Fix: always include as empty array for consistent response schema.","status":"closed","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T00:47:27.6822443-07:00","created_by":"Cecil","updated_at":"2026-02-21T01:06:56.353107527-07:00","closed_at":"2026-02-21T01:06:56.353107527-07:00","close_reason":"implemented in batch 3a"}
{"id":"mysql-mcp-t69","title":"Integration tests: timezone and date formatting","description":"Test MYSQL_TIMEZONE setting affects session timezone on connection. Test MYSQL_DATE_STRINGS=true returns dates as strings instead of serialized Date objects. Test various timezone formats: +08:00, Z, local, UTC, named zones. Verify datetime columns round-trip correctly.","status":"closed","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:47:11.191647965-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:09:59.556971607-07:00","closed_at":"2026-02-20T06:09:59.556971607-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-t69","depends_on_id":"mysql-mcp-2gl","type":"blocks","created_at":"2026-02-20T05:47:22.741064871-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-t7a","title":"Integration tests: connection pool behavior","description":"Test: pool exhaustion returns queue-limit error gracefully, connection recovery after MySQL restart (pool reconnects), concurrent queries up to pool size succeed, queries beyond queue_limit are rejected cleanly, connect_timeout respected on unreachable host.","status":"closed","priority":2,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:47:11.09812861-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:09:59.46916789-07:00","closed_at":"2026-02-20T06:09:59.46916789-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-t7a","depends_on_id":"mysql-mcp-h49","type":"blocks","created_at":"2026-02-20T05:47:22.667447984-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-tzj","title":"Invalidate schema cache after DDL execution","description":"SchemaIntrospector caches table lists and column info with a 60s TTL (stale-while-revalidate). When DDL executes (CREATE TABLE, ALTER TABLE, DROP TABLE) via execute_ddl_query in src/query/write.rs, the cache is never cleared. An LLM that creates a table then calls mysql_schema_info on it within 60s may see stale data. Fix: expose an invalidate(table, db) method on SchemaIntrospector and call it after successful DDL execution in server.rs.","status":"closed","priority":0,"issue_type":"bug","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T03:24:28.946510121-07:00","created_by":"Cecil","updated_at":"2026-02-21T03:46:45.820469327-07:00","closed_at":"2026-02-21T03:46:45.820469327-07:00","close_reason":"Schema cache invalidated after DDL: per-table for CREATE/ALTER, full invalidation for DROP"}
{"id":"mysql-mcp-ubj","title":"Unit tests: SQL parsing and permission checks","description":"Test statement type detection for all SQL types (SELECT, INSERT, UPDATE, DELETE, CREATE, ALTER, DROP, TRUNCATE, USE, SHOW). Test schema extraction. Test permission enforcement (global + schema-specific, multi-DB mode). No MySQL needed.","status":"closed","priority":1,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:43:21.621395442-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:05:58.286591337-07:00","closed_at":"2026-02-20T06:05:58.286591337-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-ubj","depends_on_id":"mysql-mcp-1gq","type":"blocks","created_at":"2026-02-20T05:43:58.145290847-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-ubj","depends_on_id":"mysql-mcp-99u","type":"blocks","created_at":"2026-02-20T05:43:58.16178888-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-uc4","title":"Log cache refresh failures instead of silently dropping","description":"schema.rs:122-124: background stale-while-revalidate errors are swallowed (Err(_) =\u003e {}). Stale cache is served indefinitely with no log. Fix: log at warn level with table/db name and failure reason.","status":"closed","priority":2,"issue_type":"bug","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T00:47:36.474552953-07:00","created_by":"Cecil","updated_at":"2026-02-21T01:03:05.862748166-07:00","closed_at":"2026-02-21T01:03:05.862748166-07:00","close_reason":"implemented in batch 2"}
{"id":"mysql-mcp-uxn","title":"Rename env vars to consistent MYSQL_* prefix","description":"## Problem\nEnvironment variable naming is inconsistent. Most vars use MYSQL_* (MYSQL_HOST, MYSQL_SSL, etc.) but operation flags use completely different patterns with no prefix:\n\n- ALLOW_INSERT_OPERATION, ALLOW_UPDATE_OPERATION, ALLOW_DELETE_OPERATION, ALLOW_DDL_OPERATION (src/config/env_config.rs:57-60)\n- MULTI_DB_WRITE_MODE (env_config.rs:65)\n- IS_REMOTE_MCP (env_config.rs:67) — verb-style, inconsistent\n- REMOTE_SECRET_KEY (env_config.rs:68) — no MYSQL_ prefix\n- PORT (env_config.rs:69) — global collision risk with nginx/Node/etc.\n\nThis confuses users, breaks the mental model ('all mysql-mcp vars start with MYSQL_'), and risks env var collisions in multi-service deployments.\n\n## Fix\nRename in src/config/env_config.rs, update README.md, mysql-mcp.example.toml, and any test env var usage:\n- ALLOW_INSERT_OPERATION → MYSQL_ALLOW_INSERT\n- ALLOW_UPDATE_OPERATION → MYSQL_ALLOW_UPDATE\n- ALLOW_DELETE_OPERATION → MYSQL_ALLOW_DELETE\n- ALLOW_DDL_OPERATION → MYSQL_ALLOW_DDL\n- MULTI_DB_WRITE_MODE → MYSQL_MULTI_DB_WRITE_MODE\n- IS_REMOTE_MCP → MYSQL_REMOTE_ENABLED\n- REMOTE_SECRET_KEY → MYSQL_REMOTE_SECRET_KEY\n- PORT → MYSQL_REMOTE_PORT\n\nAlso search src/e2e_tests.rs and src/config/tests.rs for any hardcoded old var names.\n\nAlso search for SCHEMA_\u003cNAME\u003e_PERMISSIONS env var pattern (env_config.rs:84-101) and consider renaming to MYSQL_SCHEMA_\u003cNAME\u003e_PERMISSIONS.\n\n## Verification\n- cargo test should pass 163/163\n- grep for old var names in src/ to confirm none remain\n- Check README.md and mysql-mcp.example.toml are updated","status":"closed","priority":1,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T09:35:52.646007578-07:00","created_by":"Cecil","updated_at":"2026-02-21T10:00:08.988020627-07:00","closed_at":"2026-02-21T10:00:08.988020627-07:00","close_reason":"Completed in Batch 1: remote.rs deleted, cli_parser.rs deleted, env vars renamed to MYSQL_* prefix, example TOML documented"}
{"id":"mysql-mcp-v0c","title":"Background schema cache refresh (stale-while-revalidate)","description":"Change the schema cache from synchronous blocking refresh to a stale-while-revalidate pattern: serve the stale cached value immediately while triggering a background refresh, so callers never block on cache misses.\n\nCurrent behaviour (src/schema.rs):\n- Cache hit (within TTL): return immediately ~0ms\n- Cache miss (expired): block the caller while re-fetching from DB (~128ms on remote DB), then return\n\nTarget behaviour:\n- Cache hit (within TTL): return immediately ~0ms (unchanged)\n- Cache stale (expired): return the stale value immediately (~0ms), spawn a background task to refresh\n- Background task completes ~128ms later, updates the cache — next caller gets fresh data\n\nImplementation sketch in SchemaIntrospector:\n- Add a refreshing: Arc\u003cAtomicBool\u003e flag to prevent concurrent background refreshes\n- When TTL is expired and refreshing is false: set refreshing=true, return stale value, tokio::spawn the refresh future\n- The spawned task: fetches fresh data, updates cache, clears refreshing flag\n- First cold start (empty cache): still blocks synchronously since there is no stale value to serve\n\nTrade-off: callers may see data that is up to (TTL + refresh_time) old. For schema introspection (table list, column info) this is acceptable — schemas change rarely and the LLM is already working with a potentially-stale snapshot.\n\nThe existing TTL config (cache_ttl_secs) continues to control staleness. No new config needed. The SchemaIntrospector Arc\u003cMutex\u003c...\u003e\u003e or equivalent already exists — the change is in the refresh path only.","status":"closed","priority":2,"issue_type":"feature","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T14:12:35.637548764-07:00","created_by":"Cecil","updated_at":"2026-02-20T15:08:08.419095025-07:00","closed_at":"2026-02-20T15:08:08.419095025-07:00","close_reason":"Closed"}
{"id":"mysql-mcp-wxh","title":"Return error instead of empty string on JSON serialization failure","description":"Every occurrence of serde_json::to_string_pretty(\u0026output).unwrap_or_default() in server.rs (approximately 8 call sites) silently returns an empty string if serialization fails. A NaN float in a column or any other unexpected value could produce a blank MCP response with no error. Fix: replace with match and return CallToolResult::error on failure, including the serialization error detail.","status":"closed","priority":2,"issue_type":"bug","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T03:25:06.179328347-07:00","created_by":"Cecil","updated_at":"2026-02-21T04:04:31.057680764-07:00","closed_at":"2026-02-21T04:04:31.057680764-07:00","close_reason":"All serde_json::to_string_pretty().unwrap_or_default() calls replaced with proper error returns"}
{"id":"mysql-mcp-x3m","title":"Increase default pool size from 10 to 20","description":"The default pool.size of 10 is conservative for concurrent LLM workloads. A single session can exhaust 10 connections quickly: 5 parallel SELECT queries + 2 auto-EXPLAIN triggers + 2-3 schema introspection calls. The perf tests use pool sizes of 3-15 for individual tests. Raise the default to 20 and document the tradeoff (higher default = more MySQL connections per server instance). Update any hardcoded references in tests.","status":"closed","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-21T03:25:26.321617341-07:00","created_by":"Cecil","updated_at":"2026-02-21T03:34:22.448595128-07:00","closed_at":"2026-02-21T03:34:22.448595128-07:00","close_reason":"Increased default pool.size from 10 to 20 for concurrent LLM workloads"}
{"id":"mysql-mcp-x3n","title":"Schema introspection (tables + columns)","description":"Query information_schema to list all tables (name, row count, size, create/update timestamps) and column metadata (name, type, nullable, default, key info). Cache results with configurable TTL.","status":"closed","priority":1,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:42:47.724398856-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:05:07.191829501-07:00","closed_at":"2026-02-20T06:05:07.191829501-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-x3n","depends_on_id":"mysql-mcp-h49","type":"blocks","created_at":"2026-02-20T05:43:57.834950955-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-xrf","title":"Wire tests into CI (MySQL service container)","description":"Update .github/workflows/ci.yml to add a MySQL service container (mysql:8.0) for integration and E2E tests. Set env vars, run setup script to seed test DB, then run full test suite including integration and E2E.","status":"closed","priority":3,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:43:21.733475689-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:12:52.819190211-07:00","closed_at":"2026-02-20T06:12:52.819190211-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-xrf","depends_on_id":"mysql-mcp-zaw","type":"blocks","created_at":"2026-02-20T05:43:58.291377152-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-xrf","depends_on_id":"mysql-mcp-77o","type":"blocks","created_at":"2026-02-20T05:43:58.308738223-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-xrf","depends_on_id":"mysql-mcp-jci","type":"blocks","created_at":"2026-02-20T05:43:58.325630765-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-xrf","depends_on_id":"mysql-mcp-1au","type":"blocks","created_at":"2026-02-20T05:43:58.342897779-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-xrf","depends_on_id":"mysql-mcp-11m","type":"blocks","created_at":"2026-02-20T05:43:58.358858424-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-xrf","depends_on_id":"mysql-mcp-cpd","type":"blocks","created_at":"2026-02-20T05:47:22.774765737-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-xrf","depends_on_id":"mysql-mcp-26b","type":"blocks","created_at":"2026-02-20T05:47:22.792341039-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-xrf","depends_on_id":"mysql-mcp-t7a","type":"blocks","created_at":"2026-02-20T05:47:22.8104434-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-xrf","depends_on_id":"mysql-mcp-63f","type":"blocks","created_at":"2026-02-20T05:47:22.827256402-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-xrf","depends_on_id":"mysql-mcp-t69","type":"blocks","created_at":"2026-02-20T05:47:22.842592335-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-xrf","depends_on_id":"mysql-mcp-1hq","type":"blocks","created_at":"2026-02-20T05:47:22.857808803-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-ylp","title":"Validate EXPLAIN JSON parsing against real slow queries","description":"The EXPLAIN FORMAT=JSON integration (src/query/explain.rs) was implemented against the MySQL 9.6 EXPLAIN JSON structure but has only been tested with queries that don't actually trigger EXPLAIN (performance_hints defaults to 'none'). Validate it works correctly in practice.\n\nTest plan:\n1. Run the server with MYSQL_PERFORMANCE_HINTS=always against a real database with actual tables\n2. Issue queries that should trigger different EXPLAIN outcomes:\n   - Full table scan (SELECT * FROM large_table) — expect full_table_scan=true, index_used=null\n   - Index scan (SELECT * FROM table WHERE indexed_col = x) — expect full_table_scan=false, index_used='some_index'\n   - Filesort (SELECT * FROM table ORDER BY non_indexed_col) — expect 'Using filesort' in extra_flags\n3. Verify the JSON plan block in the response contains correct values\n4. Test with multi-table queries (JOINs) — EXPLAIN JSON structure is more complex for joins, with nested table objects rather than a single query_block.table — the current parser may not handle this correctly\n5. Test the schema-aware suggestions: run a full table scan query on a table with no index on the WHERE column and verify a correct CREATE INDEX suggestion is generated\n\nFix any parsing issues found. The MySQL EXPLAIN FORMAT=JSON structure varies significantly between simple queries, joins, subqueries, and CTEs.","status":"closed","priority":2,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T17:38:46.930238669-07:00","created_by":"Cecil","updated_at":"2026-02-20T17:54:59.517968194-07:00","closed_at":"2026-02-20T17:54:59.517968194-07:00","close_reason":"Validated and fixed EXPLAIN JSON parsing for MySQL 8.1 (schema v1) and MySQL 9.6 (schema v2). The original parser assumed a flat query_block.table structure. Real DB testing revealed: (1) MySQL 9.6 uses json_schema_version 2.0 with a query_plan tree using access_type fields (table/index/join/sort/filter/limit); (2) MySQL 8.1 uses query_block schema v1 but wraps the table node in ordering_operation/grouping_operation wrappers with using_filesort on the wrapper, not the leaf. Added recursive walkers for both schemas, fixed filtered% parsing (stored as string in 8.1), added 9 unit tests and 5 integration tests, all 145 tests pass."}
{"id":"mysql-mcp-zaw","title":"Add GitHub Actions CI workflow","description":"Create .github/workflows/ci.yml. On push/PR: cargo fmt check, cargo clippy, cargo test (with MySQL service container for integration tests). Matrix: ubuntu-latest, maybe macos.","status":"closed","priority":1,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:42:16.10079195-07:00","created_by":"Cecil","updated_at":"2026-02-20T05:56:33.501702281-07:00","closed_at":"2026-02-20T05:56:33.501702281-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-zaw","depends_on_id":"mysql-mcp-e89","type":"blocks","created_at":"2026-02-20T05:43:57.638226839-07:00","created_by":"Cecil"}]}
{"id":"mysql-mcp-zho","title":"rmcp server with stdio transport","description":"Bootstrap rmcp Server with stdio transport (default mode). Register tool and resource capabilities. Implement graceful shutdown on SIGINT/SIGTERM. Wire up server info (name: mysql-mcp, version from Cargo.toml).","status":"closed","priority":0,"issue_type":"task","owner":"cecilthecoder@proton.me","created_at":"2026-02-20T05:43:01.906340622-07:00","created_by":"Cecil","updated_at":"2026-02-20T06:05:07.216204617-07:00","closed_at":"2026-02-20T06:05:07.216204617-07:00","close_reason":"Closed","dependencies":[{"issue_id":"mysql-mcp-zho","depends_on_id":"mysql-mcp-e89","type":"blocks","created_at":"2026-02-20T05:43:57.899953667-07:00","created_by":"Cecil"},{"issue_id":"mysql-mcp-zho","depends_on_id":"mysql-mcp-lok","type":"blocks","created_at":"2026-02-20T05:43:57.918273105-07:00","created_by":"Cecil"}]}
